// æ•°æ®ç®¡ç†
const STORAGE_KEY = 'musicplan_songs';
const START_DATE_KEY = 'musicplan_start_date';
const TOTAL_DAYS = 180; // æ€»å¤©æ•°ï¼ˆä»å¼€å§‹æ—¥æœŸç®—èµ·ï¼‰
const TARGET_SONGS = 9;
const HOURS_PER_SONG = 40; // ä¸€é¦–æ­Œ40æœ‰æ•ˆå°æ—¶
const MAX_HOURS_PER_DAY = 6; // æ¯å¤©æœ€å¤š6æœ‰æ•ˆå°æ—¶
const RECOMMENDED_HOURS_PER_DAY = 2; // æ¨èæ¯å¤©2å°æ—¶ï¼ˆå·²å…»æˆçš„ä¹ æƒ¯ï¼‰

// è·å–æˆ–è®¾ç½®å¼€å§‹æ—¥æœŸ
function getStartDate() {
    const saved = localStorage.getItem(START_DATE_KEY);
    if (saved) {
        const date = new Date(saved);
        date.setHours(0, 0, 0, 0);
        return date;
    }
    // å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤ä½¿ç”¨2025-11-08ä½œä¸ºå¼€å§‹æ—¥æœŸ
    const defaultDate = new Date('2025-11-08');
    defaultDate.setHours(0, 0, 0, 0);
    setStartDate(defaultDate);
    return defaultDate;
}

// è®¾ç½®å¼€å§‹æ—¥æœŸ
function setStartDate(date) {
    localStorage.setItem(START_DATE_KEY, date.toISOString());
}

// è®¡ç®—å‰©ä½™å¤©æ•°ï¼ˆåŠ¨æ€è®¡ç®—ï¼‰
function getRemainingDays() {
    const startDate = getStartDate();
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const endDate = new Date(startDate);
    endDate.setDate(startDate.getDate() + TOTAL_DAYS);
    
    const remaining = Math.ceil((endDate - today) / (1000 * 60 * 60 * 24));
    return Math.max(0, remaining); // ç¡®ä¿ä¸ä¸ºè´Ÿæ•°
}

// ä»»åŠ¡åˆ—è¡¨
const TASKS = [
    'æ–°æ›²é£å‰æœŸå‡†å¤‡ï¼ˆè‡³å°‘ä¸€å‘¨ï¼‰ï¼šå¬10å¼ ä¸“è¾‘ï¼Œæœç´¢æ›²é£ä»‹ç»ï¼ˆBPMã€é…å™¨éŸ³è‰²ã€ä»£è¡¨äººç‰©ã€ç»å…¸æ›²ç›®ã€æœ€æ–°æ›²ç›®ï¼‰',
    'ç¡®å®šå­æ›²é£ï¼Œæ‰¾åˆ°3é¦–å‚è€ƒæ­Œï¼Œå‘ç»™é˜Ÿé•¿',
    'åˆ¶ä½œDemoï¼Œè‡ªå·±è§‰å¾—OK',
    'Demoå‘ç»™é˜Ÿé•¿ï¼Œè·å–æ„è§',
    'å®Œæˆç¼–æ›²',
    'ç¼–æ›²å‘ç»™é˜Ÿé•¿ï¼Œè·å–æ„è§',
    'ç¼–æ›²OKï¼Œå¼€å§‹æ··éŸ³æ¯å¸¦',
    'æ··éŸ³æ¯å¸¦å‘ç»™é˜Ÿé•¿ï¼Œè·å–æ„è§',
    'é˜Ÿé•¿OKï¼Œå‘ç»™æ ¡é•¿',
    'æ ¡é•¿OKï¼Œå®Œæˆåˆ¶ä½œ'
];

// é˜¶æ®µåˆ—è¡¨
const STAGES = [
    'æ›²é£ç ”ç©¶',
    'Demoåˆ¶ä½œ',
    'ç¼–æ›²',
    'æ··éŸ³æ¯å¸¦',
    'é˜Ÿé•¿å®¡æ ¸',
    'æ ¡é•¿å®¡æ ¸',
    'å·²å®Œæˆ'
];

// ç¼–æ›²/æ··éŸ³å°çŸ¥è¯†åº“ï¼ˆ180æ¡ï¼‰
const KNOWLEDGE_BASE = [
    // åŸºç¡€æ··éŸ³æŠ€å·§ (1-30)
    { title: "é¢‘ç‡å¹³è¡¡", content: "æ··éŸ³æ—¶ï¼Œç¡®ä¿ä½é¢‘ï¼ˆ20-200Hzï¼‰ã€ä¸­é¢‘ï¼ˆ200-2kHzï¼‰å’Œé«˜é¢‘ï¼ˆ2k-20kHzï¼‰çš„èƒ½é‡åˆ†å¸ƒå‡è¡¡ã€‚ä½¿ç”¨é¢‘è°±åˆ†æä»ªå¯ä»¥å¸®åŠ©ä½ ç›´è§‚çœ‹åˆ°é¢‘ç‡åˆ†å¸ƒã€‚" },
    { title: "ç©ºé—´æ„Ÿè¥é€ ", content: "ä½¿ç”¨æ··å“å’Œå»¶è¿Ÿæ¥åˆ›é€ ç©ºé—´æ„Ÿã€‚çŸ­æ··å“ï¼ˆ0.5-1ç§’ï¼‰é€‚åˆèŠ‚å¥ä¹å™¨ï¼Œé•¿æ··å“ï¼ˆ2-4ç§’ï¼‰é€‚åˆä¸»æ—‹å¾‹å’ŒèƒŒæ™¯å…ƒç´ ã€‚" },
    { title: "åŠ¨æ€å¤„ç†", content: "å‹ç¼©å™¨ä¸æ˜¯ç”¨æ¥è®©å£°éŸ³æ›´å¤§ï¼Œè€Œæ˜¯ç”¨æ¥æ§åˆ¶åŠ¨æ€èŒƒå›´ã€‚é€‚åº¦çš„å‹ç¼©ï¼ˆ2:1åˆ°4:1ï¼‰å¯ä»¥è®©å£°éŸ³æ›´ç¨³å®šï¼Œè¿‡åº¦å‹ç¼©ä¼šè®©éŸ³ä¹å¤±å»ç”Ÿå‘½åŠ›ã€‚" },
    { title: "ä¾§é“¾å‹ç¼©", content: "åœ¨ç”µå­éŸ³ä¹ä¸­ï¼Œä½¿ç”¨ä¾§é“¾å‹ç¼©è®©åº•é¼“å’Œè´æ–¯ä¸å†²çªã€‚å½“åº•é¼“å“èµ·æ—¶ï¼Œè´æ–¯éŸ³é‡è‡ªåŠ¨é™ä½ï¼Œåˆ›é€ ç»å…¸çš„'pumping'æ•ˆæœã€‚" },
    { title: "EQæŠ€å·§", content: "å‡æ³•EQæ¯”åŠ æ³•EQæ›´æœ‰æ•ˆã€‚å…ˆå‰Šå‡ä¸éœ€è¦çš„é¢‘ç‡ï¼Œå†é€‚å½“æå‡éœ€è¦çš„é¢‘ç‡ã€‚è®°ä½ï¼šæ¯ä¸ªé¢‘ç‡çš„æå‡éƒ½ä¼šå½±å“æ•´ä½“å¹³è¡¡ã€‚" },
    { title: "æ¯å¸¦å¤„ç†", content: "æ¯å¸¦å¤„ç†æ˜¯æœ€åä¸€æ­¥ï¼Œç”¨æ¥ç»Ÿä¸€æ•´é¦–æ­Œçš„éŸ³é‡å’ŒéŸ³è‰²ã€‚ä½¿ç”¨å¤šæ®µå‹ç¼©å’Œç«‹ä½“å£°å¢å¼ºå™¨ï¼Œä½†è¦ä¿æŒå…‹åˆ¶ï¼Œè¿‡åº¦å¤„ç†ä¼šç ´åéŸ³ä¹çš„è‡ªç„¶æ„Ÿã€‚" },
    { title: "å‚è€ƒæ›²ç›®", content: "åˆ¶ä½œæ—¶ç»å¸¸å¯¹æ¯”å‚è€ƒæ›²ç›®ï¼Œä½†ä¸è¦å®Œå…¨æ¨¡ä»¿ã€‚åˆ†æå‚è€ƒæ›²ç›®çš„é¢‘ç‡åˆ†å¸ƒã€åŠ¨æ€èŒƒå›´å’Œç©ºé—´æ„Ÿï¼Œç„¶ååº”ç”¨åˆ°è‡ªå·±çš„ä½œå“ä¸­ã€‚" },
    { title: "ç›‘å¬ç¯å¢ƒ", content: "åœ¨ä¸åŒçš„ç›‘å¬è®¾å¤‡ä¸Šæµ‹è¯•ä½ çš„æ··éŸ³ï¼šè€³æœºã€éŸ³ç®±ã€æ‰‹æœºã€‚å¦‚æœæ··éŸ³åœ¨æ‰€æœ‰è¿™äº›è®¾å¤‡ä¸Šéƒ½å¬èµ·æ¥ä¸é”™ï¼Œè¯´æ˜ä½ çš„æ··éŸ³æ˜¯æˆåŠŸçš„ã€‚" },
    { title: "ä¼‘æ¯çš„é‡è¦æ€§", content: "åˆ¶ä½œéŸ³ä¹æ—¶ï¼Œè€³æœµä¼šç–²åŠ³ã€‚æ¯å·¥ä½œ1-2å°æ—¶ä¼‘æ¯15åˆ†é’Ÿï¼Œè®©è€³æœµæ¢å¤æ•æ„Ÿåº¦ã€‚ç¬¬äºŒå¤©å†å¬ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä¹‹å‰æ²¡æ³¨æ„åˆ°çš„é—®é¢˜ã€‚" },
    { title: "è‡ªåŠ¨åŒ–", content: "ä½¿ç”¨è‡ªåŠ¨åŒ–æ¥åˆ›é€ åŠ¨æ€å˜åŒ–ã€‚éŸ³é‡ã€æ»¤æ³¢å™¨ã€æ•ˆæœå™¨å‚æ•°çš„è‡ªåŠ¨åŒ–å¯ä»¥è®©éŸ³ä¹æ›´æœ‰ç”Ÿå‘½åŠ›ï¼Œé¿å…é™æ€å’Œå•è°ƒã€‚" },
    { title: "ç›¸ä½é—®é¢˜", content: "æ£€æŸ¥ç«‹ä½“å£°ç›¸ä½ã€‚å¦‚æœå·¦å³å£°é“ç›¸ä½ç›¸åï¼Œåœ¨å•å£°é“æ’­æ”¾æ—¶ä¼šæŠµæ¶ˆã€‚ä½¿ç”¨ç›¸ä½è¡¨æˆ–å•å£°é“ç›‘å¬æ¥æ£€æŸ¥ã€‚" },
    { title: "ä½éŸ³å¤„ç†", content: "ä½éŸ³ï¼ˆç‰¹åˆ«æ˜¯sub-bassï¼‰åœ¨å•å£°é“ä¸­å¤„ç†ï¼Œå› ä¸ºäººè€³æ— æ³•å®šä½æä½é¢‘ã€‚è¿™æ ·å¯ä»¥é¿å…ç›¸ä½é—®é¢˜ï¼Œç¡®ä¿åœ¨ä»»ä½•æ’­æ”¾è®¾å¤‡ä¸Šéƒ½æœ‰ç¨³å®šçš„ä½éŸ³ã€‚" },
    { title: "äººå£°å¤„ç†", content: "äººå£°æ··éŸ³æ—¶ï¼Œä½¿ç”¨é«˜é€šæ»¤æ³¢å™¨å»é™¤80Hzä»¥ä¸‹çš„ä½é¢‘å™ªéŸ³ã€‚åœ¨3-5kHzæå‡å¯ä»¥å¢åŠ æ¸…æ™°åº¦ï¼Œåœ¨200-300Hzå‰Šå‡å¯ä»¥å‡å°‘æµ‘æµŠæ„Ÿã€‚" },
    { title: "é¼“ç»„æ··éŸ³", content: "åº•é¼“åœ¨60-80Hzæœ‰å†²å‡»åŠ›ï¼Œå†›é¼“åœ¨2-4kHzæœ‰ç©¿é€åŠ›ã€‚ä½¿ç”¨é—¨é™å™¨å»é™¤ä¸éœ€è¦çš„å…±æŒ¯ï¼Œä½¿ç”¨å‹ç¼©å™¨æ§åˆ¶åŠ¨æ€ã€‚" },
    { title: "ç«‹ä½“å£°å®½åº¦", content: "ä¸»æ—‹å¾‹å’Œä¸»å”±é€šå¸¸æ”¾åœ¨ä¸­å¤®ï¼ŒèƒŒæ™¯å…ƒç´ å¯ä»¥æ”¾åœ¨ä¸¤ä¾§ã€‚ä½¿ç”¨ç«‹ä½“å£°å¢å¼ºå™¨æ—¶è¦å°å¿ƒï¼Œè¿‡åº¦å¤„ç†ä¼šè®©å£°éŸ³ä¸è‡ªç„¶ã€‚" },
    { title: "æ··å“å‘é€", content: "ä½¿ç”¨å‘é€å¼æ··å“è€Œä¸æ˜¯æ’å…¥å¼ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°æ§åˆ¶å¹²æ¹¿æ¯”ã€‚å¤šä¸ªè½¨é“å¯ä»¥å…±äº«åŒä¸€ä¸ªæ··å“ï¼Œåˆ›é€ ç»Ÿä¸€çš„ç©ºé—´æ„Ÿã€‚" },
    { title: "å»¶è¿ŸæŠ€å·§", content: "å»¶è¿Ÿæ—¶é—´ä¸æ­Œæ›²é€Ÿåº¦ç›¸å…³ã€‚1/4éŸ³ç¬¦å»¶è¿Ÿé€‚åˆå¤§å¤šæ•°æƒ…å†µï¼Œ1/8éŸ³ç¬¦å»¶è¿Ÿåˆ›é€ æ›´å¿«çš„èŠ‚å¥æ„Ÿï¼Œ1/16éŸ³ç¬¦å»¶è¿Ÿé€‚åˆç”µå­éŸ³ä¹ã€‚" },
    { title: "å‹ç¼©å™¨å‚æ•°", content: "Attackæ§åˆ¶å‹ç¼©å™¨ååº”é€Ÿåº¦ï¼šå¿«attackï¼ˆ1-10msï¼‰é€‚åˆç¬æ€ï¼Œæ…¢attackï¼ˆ10-50msï¼‰ä¿ç•™å†²å‡»åŠ›ã€‚Releaseæ§åˆ¶æ¢å¤é€Ÿåº¦ï¼Œé€šå¸¸è®¾ä¸º50-200msã€‚" },
    { title: "å¤šæ®µå‹ç¼©", content: "å¤šæ®µå‹ç¼©å¯ä»¥åˆ†åˆ«å¤„ç†ä¸åŒé¢‘æ®µã€‚ä½é¢‘æ®µå‹ç¼©å¯ä»¥æ§åˆ¶åº•é¼“å’Œè´æ–¯ï¼Œä¸­é¢‘æ®µå‹ç¼©å¯ä»¥æ§åˆ¶äººå£°ï¼Œé«˜é¢‘æ®µå‹ç¼©å¯ä»¥æ§åˆ¶é•²ç‰‡ã€‚" },
    { title: "é¥±å’Œå™¨ä½¿ç”¨", content: "é¥±å’Œå™¨å¯ä»¥å¢åŠ è°æ³¢ï¼Œè®©å£°éŸ³æ›´æ¸©æš–ã€æ›´æœ‰è´¨æ„Ÿã€‚é€‚åº¦ä½¿ç”¨å¯ä»¥å¢åŠ éŸ³ä¹çš„é­…åŠ›ï¼Œè¿‡åº¦ä½¿ç”¨ä¼šè®©å£°éŸ³å¤±çœŸã€‚" },
    { title: "é—¨é™å™¨", content: "é—¨é™å™¨å¯ä»¥å»é™¤èƒŒæ™¯å™ªéŸ³å’Œä¸éœ€è¦çš„å£°éŸ³ã€‚è®¾ç½®åˆé€‚çš„é˜ˆå€¼å’Œé‡Šæ”¾æ—¶é—´ï¼Œé¿å…åˆ‡æ–­é‡è¦çš„å£°éŸ³ã€‚" },
    { title: "EQé¢‘ç‡è®°å¿†", content: "è®°ä½å…³é”®é¢‘ç‡ï¼š60Hzåº•é¼“å†²å‡»ï¼Œ200Hzæµ‘æµŠï¼Œ500Hzç®±ä½“æ„Ÿï¼Œ1kHzä¸­é¢‘ï¼Œ3kHzæ¸…æ™°åº¦ï¼Œ5kHzäº®åº¦ï¼Œ10kHzç©ºæ°”æ„Ÿã€‚" },
    { title: "éŸ³é‡å¹³è¡¡", content: "æ··éŸ³æ—¶å…ˆå¹³è¡¡éŸ³é‡ï¼Œå†å¤„ç†æ•ˆæœã€‚å¦‚æœæŸä¸ªå…ƒç´ å¤ªçªå‡ºï¼Œå…ˆé™ä½éŸ³é‡ï¼Œè€Œä¸æ˜¯å¢åŠ å…¶ä»–å…ƒç´ ã€‚" },
    { title: "é¢‘ç‡æ©è”½", content: "å½“ä¸¤ä¸ªå£°éŸ³åœ¨ç›¸åŒé¢‘ç‡æ—¶ï¼Œè¾ƒå“çš„ä¼šæ©è”½è¾ƒå¼±çš„ã€‚ä½¿ç”¨EQä¸ºæ¯ä¸ªå…ƒç´ åˆ›é€ ç‹¬ç‰¹çš„é¢‘ç‡ç©ºé—´ã€‚" },
    { title: "ç¬æ€å¤„ç†", content: "ç¬æ€å¤„ç†å™¨å¯ä»¥å¢å¼ºæˆ–å‡å¼±å£°éŸ³çš„èµ·éŸ³ã€‚å¢å¼ºç¬æ€å¯ä»¥è®©é¼“æ›´æœ‰å†²å‡»åŠ›ï¼Œå‡å¼±ç¬æ€å¯ä»¥è®©å£°éŸ³æ›´å¹³æ»‘ã€‚" },
    { title: "å¹¶è¡Œå‹ç¼©", content: "å¹¶è¡Œå‹ç¼©ï¼ˆNew Yorkå‹ç¼©ï¼‰å°†å‹ç¼©åçš„ä¿¡å·ä¸åŸå§‹ä¿¡å·æ··åˆï¼Œæ—¢ä¿ç•™äº†åŠ¨æ€ï¼Œåˆå¢åŠ äº†å¯†åº¦å’Œå†²å‡»åŠ›ã€‚" },
    { title: "æ€»çº¿å‹ç¼©", content: "åœ¨æ€»çº¿ä¸Šä½¿ç”¨è½»å¾®å‹ç¼©ï¼ˆ2:1ï¼Œ1-2dBå¢ç›Šè¡°å‡ï¼‰å¯ä»¥è®©æ‰€æœ‰å…ƒç´ æ›´å¥½åœ°èåˆåœ¨ä¸€èµ·ã€‚" },
    { title: "é™åˆ¶å™¨ä½¿ç”¨", content: "é™åˆ¶å™¨æ˜¯æ¯å¸¦å¤„ç†çš„æœ€åä¸€æ­¥ï¼Œç”¨æ¥é˜²æ­¢è¿‡è½½ã€‚è®¾ç½®åˆé€‚çš„è¾“å‡ºç”µå¹³ï¼ˆ-0.3dBåˆ°-1dBï¼‰ï¼Œé¿å…å‰Šæ³¢å¤±çœŸã€‚" },
    { title: "å•å£°é“æ£€æŸ¥", content: "ç»å¸¸åˆ‡æ¢åˆ°å•å£°é“æ¨¡å¼æ£€æŸ¥æ··éŸ³ã€‚å¦‚æœå•å£°é“å¬èµ·æ¥ä¸é”™ï¼Œç«‹ä½“å£°é€šå¸¸ä¹Ÿä¼šå¾ˆå¥½ã€‚è¿™å¯ä»¥é¿å…ç›¸ä½é—®é¢˜ã€‚" },
    { title: "é¢‘è°±åˆ†æ", content: "ä½¿ç”¨é¢‘è°±åˆ†æä»ªæŸ¥çœ‹é¢‘ç‡åˆ†å¸ƒï¼Œä½†ä¸è¦å®Œå…¨ä¾èµ–å®ƒã€‚æœ€ç»ˆè¿˜æ˜¯è¦ç”¨è€³æœµåˆ¤æ–­ï¼Œå› ä¸ºé¢‘è°±å›¾ä¸èƒ½å‘Šè¯‰ä½ éŸ³ä¹æ˜¯å¦å¥½å¬ã€‚" },
    
    // ç¼–æ›²æŠ€å·§ (31-60)
    { title: "ç¼–æ›²å±‚æ¬¡", content: "å¥½çš„ç¼–æ›²æœ‰æ¸…æ™°çš„å±‚æ¬¡ï¼šä¸»æ—‹å¾‹ã€å’Œå£°ã€èŠ‚å¥ã€ä½éŸ³ã€‚ç¡®ä¿æ¯ä¸ªå±‚æ¬¡éƒ½æœ‰å…¶ç‹¬ç‰¹çš„é¢‘ç‡ç©ºé—´ï¼Œé¿å…ç›¸äº’æ©è”½ã€‚" },
    { title: "å’Œå£°è¿›è¡Œ", content: "å­¦ä¹ å’Œå£°ç†è®ºï¼Œä½†ä¸è¦è¢«è§„åˆ™æŸç¼šã€‚ç»å…¸çš„å’Œå£°è¿›è¡Œï¼ˆå¦‚I-V-vi-IVï¼‰ä¹‹æ‰€ä»¥ç»å…¸ï¼Œæ˜¯å› ä¸ºå®ƒä»¬æœ‰æ•ˆã€‚åœ¨æ­¤åŸºç¡€ä¸Šåˆ›æ–°ã€‚" },
    { title: "èŠ‚å¥å˜åŒ–", content: "åœ¨ç¼–æ›²ä¸­é€‚å½“æ”¹å˜èŠ‚å¥å¯†åº¦ã€‚ä¸»æ­Œå¯ä»¥ç¨€ç–ï¼Œå‰¯æ­Œå¯ä»¥å¯†é›†ï¼Œæ¡¥æ®µå¯ä»¥å®Œå…¨æ”¹å˜èŠ‚å¥ï¼Œåˆ›é€ å¯¹æ¯”å’Œå¼ åŠ›ã€‚" },
    { title: "ä¹å™¨ç¼–æ’", content: "åˆç†å®‰æ’ä¹å™¨å‡ºåœºé¡ºåºï¼Œé¿å…æ··ä¹±ã€‚ä¸»æ­Œå¯ä»¥åªæœ‰å°‘æ•°ä¹å™¨ï¼Œå‰¯æ­Œå¯ä»¥åŠ å…¥æ›´å¤šå…ƒç´ ï¼Œåˆ›é€ å±‚æ¬¡æ„Ÿã€‚" },
    { title: "éŸ³è‰²æ­é…", content: "ç¡®ä¿ä¸åŒä¹å™¨çš„éŸ³è‰²å’Œè°ï¼Œé¿å…å†²çªã€‚é€‰æ‹©äº’è¡¥çš„éŸ³è‰²ï¼Œè€Œä¸æ˜¯ç›¸ä¼¼çš„å£°éŸ³ã€‚" },
    { title: "èŠ‚æ‹é€‰æ‹©", content: "æ ¹æ®æ­Œæ›²æƒ…æ„Ÿé€‰æ‹©é€‚å½“çš„èŠ‚æ‹ã€‚4/4æ‹æœ€å¸¸è§ï¼Œ3/4æ‹é€‚åˆåå°”å…¹é£æ ¼ï¼Œ6/8æ‹é€‚åˆæŠ’æƒ…æ­Œæ›²ã€‚" },
    { title: "é€Ÿåº¦è®¾å®š", content: "é€Ÿåº¦å½±å“æ­Œæ›²æ°›å›´ã€‚æ…¢é€Ÿï¼ˆ60-80 BPMï¼‰é€‚åˆæŠ’æƒ…ï¼Œä¸­é€Ÿï¼ˆ100-120 BPMï¼‰é€‚åˆæµè¡Œï¼Œå¿«é€Ÿï¼ˆ130+ BPMï¼‰é€‚åˆèˆæ›²ã€‚" },
    { title: "å‰å¥è®¾è®¡", content: "å‰å¥åº”å¼•äººå…¥èƒœï¼Œå¥ å®šæ­Œæ›²åŸºè°ƒã€‚å¯ä»¥æ˜¯ä¸»æ—‹å¾‹çš„ç®€åŒ–ç‰ˆï¼Œä¹Ÿå¯ä»¥æ˜¯ç‹¬ç‰¹çš„éŸ³è‰²å±•ç¤ºã€‚" },
    { title: "é—´å¥å®‰æ’", content: "é—´å¥å¯ç”¨äºè¿‡æ¸¡æˆ–å±•ç¤ºä¹å™¨æŠ€å·§ï¼Œä½†é¿å…è¿‡é•¿å¯¼è‡´ä¹å‘³ã€‚é€šå¸¸8-16å°èŠ‚å°±è¶³å¤Ÿäº†ã€‚" },
    { title: "å°¾å¥å¤„ç†", content: "å°¾å¥åº”ä¸æ•´é¦–æ­Œæ›²é£æ ¼ä¸€è‡´ï¼Œç»™å¬ä¼—ç•™ä¸‹æ·±åˆ»å°è±¡ã€‚å¯ä»¥æ˜¯æ¸å¼±ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼ºæœ‰åŠ›çš„ç»“æŸã€‚" },
    { title: "å’Œå£°ç¼–å†™", content: "å’Œå£°åº”æ”¯æŒä¸»æ—‹å¾‹ï¼Œé¿å…å–§å®¾å¤ºä¸»ã€‚ä½¿ç”¨ä¸‰å’Œå¼¦å’Œä¸ƒå’Œå¼¦ï¼Œé€‚å½“åŠ å…¥å»¶ä¼¸éŸ³å¢åŠ è‰²å½©ã€‚" },
    { title: "æ—‹å¾‹çº¿æ¡", content: "æ—‹å¾‹åº”å…·æœ‰èµ·ä¼ï¼Œé¿å…å•è°ƒã€‚ä½¿ç”¨éŸ³ç¨‹è·³è·ƒå’Œçº§è¿›ç»“åˆï¼Œåˆ›é€ æœ‰å¼ åŠ›çš„æ—‹å¾‹çº¿ã€‚" },
    { title: "é‡å¤ä¸å˜åŒ–", content: "é‡å¤å¯å¼ºåŒ–ä¸»é¢˜ï¼Œä½†éœ€æ³¨æ„å˜åŒ–ï¼Œé¿å…å•è°ƒã€‚æ¯æ¬¡é‡å¤å¯ä»¥æ”¹å˜é…å™¨ã€å’Œå£°æˆ–èŠ‚å¥ã€‚" },
    { title: "å¯¹æ¯”æ‰‹æ³•", content: "é€šè¿‡å¯¹æ¯”å¢å¼ºæ­Œæ›²å±‚æ¬¡ï¼šå¼ºå¼±å¯¹æ¯”ã€å¿«æ…¢å¯¹æ¯”ã€ç¨€ç–å¯†é›†å¯¹æ¯”ã€‚ä¸»æ­Œå’Œå‰¯æ­Œåº”è¯¥æœ‰æ˜æ˜¾åŒºåˆ«ã€‚" },
    { title: "è°ƒå¼è½¬æ¢", content: "é€‚æ—¶çš„è°ƒå¼è½¬æ¢å¯å¸¦æ¥æ–°é²œæ„Ÿï¼Œä½†éœ€è°¨æ…ä½¿ç”¨ã€‚å…³ç³»å¤§å°è°ƒè½¬æ¢æœ€å¸¸è§ï¼Œä¹Ÿæœ€å®¹æ˜“æ¥å—ã€‚" },
    { title: "è½¬è°ƒæŠ€å·§", content: "è½¬è°ƒå¯ä»¥å¢åŠ æƒ…æ„Ÿå¼ åŠ›ã€‚å‘ä¸Šè½¬è°ƒï¼ˆå‡åŠéŸ³æˆ–å…¨éŸ³ï¼‰é€šå¸¸å¸¦æ¥èƒ½é‡æå‡ï¼Œé€‚åˆå‰¯æ­Œã€‚" },
    { title: "èŠ‚å¥å‹è®¾è®¡", content: "ä¸åŒçš„èŠ‚å¥å‹ä¼šç»™éŸ³ä¹å¸¦æ¥ä¸åŒçš„æ„Ÿè§‰ã€‚å°è¯•å¤šç§èŠ‚å¥ç»„åˆï¼Œæ‰¾åˆ°æœ€é€‚åˆæ­Œæ›²é£æ ¼çš„ã€‚" },
    { title: "ä½éŸ³çº¿è®¾è®¡", content: "è´æ–¯çº¿åº”ä¸é¼“ç»„ç´§å¯†é…åˆï¼Œæä¾›ä½é¢‘æ”¯æ’‘ã€‚å¯ä»¥æ˜¯æ ¹éŸ³è·Ÿéšï¼Œä¹Ÿå¯ä»¥æ˜¯æ—‹å¾‹æ€§ä½éŸ³çº¿ã€‚" },
    { title: "é¼“ç»„ç¼–å†™", content: "é¼“ç»„èŠ‚å¥åº”ç¨³å›ºï¼Œæ”¯æ’‘æ•´ä¸ªç¼–æ›²ã€‚åº•é¼“å’Œå†›é¼“çš„é…åˆæ˜¯åŸºç¡€ï¼Œé•²ç‰‡å¢åŠ èŠ‚å¥æ„Ÿã€‚" },
    { title: "å‰ä»–ç¼–é…", content: "å‰ä»–å¯ç”¨äºå’Œå£°å¡«å……æˆ–æ—‹å¾‹è£…é¥°ã€‚èŠ‚å¥å‰ä»–æä¾›å’Œå£°åŸºç¡€ï¼Œä¸»éŸ³å‰ä»–æä¾›æ—‹å¾‹çº¿æ¡ã€‚" },
    { title: "é”®ç›˜ä½¿ç”¨", content: "é”®ç›˜å¯æä¾›å’Œå£°åŸºç¡€æˆ–æ—‹å¾‹ç‚¹ç¼€ã€‚é’¢ç´é€‚åˆå’Œå£°ï¼Œåˆæˆå™¨é€‚åˆéŸ³è‰²å’Œæ°›å›´ã€‚" },
    { title: "å¼¦ä¹ç¼–å†™", content: "å¼¦ä¹å¯å¢åŠ åšåº¦å’Œæƒ…æ„Ÿï¼Œä½†éœ€é¿å…è¿‡åº¦å †ç Œã€‚ä½¿ç”¨å¼¦ä¹ç»„æ—¶æ³¨æ„å£°éƒ¨å®‰æ’ï¼Œé¿å…æ··ä¹±ã€‚" },
    { title: "ç®¡ä¹å®‰æ’", content: "ç®¡ä¹å¯æä¾›æ˜äº®è‰²å½©ï¼Œéœ€æ³¨æ„ä¸å…¶ä»–ä¹å™¨çš„å¹³è¡¡ã€‚å°å·ã€è¨å…‹æ–¯ç­‰å¯ä»¥å¢åŠ çˆµå£«æˆ–æµè¡Œæ„Ÿã€‚" },
    { title: "äººå£°ç¼–æ’", content: "ä¸»å”±ä¸å’Œå£°çš„é…åˆåº”å’Œè°ï¼Œé¿å…å†²çªã€‚å’Œå£°é€šå¸¸æ¯”ä¸»å”±ä½3-6åº¦ï¼Œåˆ›é€ å±‚æ¬¡æ„Ÿã€‚" },
    { title: "éŸ³åŸŸå®‰æ’", content: "é¿å…ä¹å™¨éŸ³åŸŸé‡å ï¼Œç¡®ä¿å„éƒ¨åˆ†æ¸…æ™°å¯è¾¨ã€‚ä¸ºæ¯ä¸ªä¹å™¨åˆ†é…ç‹¬ç‰¹çš„éŸ³åŸŸç©ºé—´ã€‚" },
    { title: "åŠ¨æ€æ§åˆ¶", content: "é€šè¿‡éŸ³é‡å˜åŒ–å¢åŠ éŸ³ä¹çš„å±‚æ¬¡æ„Ÿå’Œæƒ…æ„Ÿè¡¨è¾¾ã€‚ä¸»æ­Œå¯ä»¥è½»æŸ”ï¼Œå‰¯æ­Œå¯ä»¥å¼ºçƒˆã€‚" },
    { title: "è£…é¥°éŸ³ä½¿ç”¨", content: "é€‚å½“çš„è£…é¥°éŸ³å¯ä¸°å¯Œæ—‹å¾‹ï¼Œä½†é¿å…è¿‡åº¦ã€‚æ»‘éŸ³ã€é¢¤éŸ³ã€è£…é¥°éŸ³å¯ä»¥å¢åŠ è¡¨ç°åŠ›ã€‚" },
    { title: "éŸ³æ•ˆè¿ç”¨", content: "é€‚å½“çš„éŸ³æ•ˆå¯å¢åŠ æ°›å›´ï¼Œä½†é¿å…å–§å®¾å¤ºä¸»ã€‚ç¯å¢ƒéŸ³ã€é‡‡æ ·éŸ³æ•ˆå¯ä»¥å¢åŠ çœŸå®æ„Ÿã€‚" },
    { title: "ç”µå­å…ƒç´ ", content: "åœ¨æµè¡ŒéŸ³ä¹ä¸­ï¼Œç”µå­å…ƒç´ å¯å¢åŠ ç°ä»£æ„Ÿã€‚åˆæˆå™¨ã€ç”µå­é¼“ã€æ•ˆæœå™¨å¯ä»¥åˆ›é€ ç‹¬ç‰¹éŸ³è‰²ã€‚" },
    { title: "é‡‡æ ·ä½¿ç”¨", content: "ä½¿ç”¨é‡‡æ ·éœ€æ³¨æ„ç‰ˆæƒé—®é¢˜ï¼Œå¹¶ç¡®ä¿ä¸æ­Œæ›²é£æ ¼åŒ¹é…ã€‚å¯ä»¥é‡‡æ ·è‡ªå·±çš„å½•éŸ³ï¼Œæˆ–ä½¿ç”¨å…ç‰ˆç¨é‡‡æ ·åº“ã€‚" },
    { title: "ç¼–æ›²ç»“æ„", content: "å¸¸è§ç»“æ„åŒ…æ‹¬å‰å¥ã€ä¸»æ­Œã€é¢„å‰¯æ­Œã€å‰¯æ­Œã€æ¡¥æ®µã€å°¾å¥ã€‚åˆç†å®‰æ’ä½¿æ­Œæ›²æ›´å…·å¸å¼•åŠ›ã€‚" },
    
    // éŸ³è‰²è®¾è®¡ (61-90)
    { title: "åˆæˆå™¨åŸºç¡€", content: "äº†è§£æŒ¯è¡å™¨ã€æ»¤æ³¢å™¨ã€åŒ…ç»œã€LFOçš„åŸºæœ¬åŸç†ã€‚æŒ¯è¡å™¨äº§ç”Ÿæ³¢å½¢ï¼Œæ»¤æ³¢å™¨æ”¹å˜éŸ³è‰²ï¼ŒåŒ…ç»œæ§åˆ¶åŠ¨æ€ï¼ŒLFOåˆ›é€ è¿åŠ¨ã€‚" },
    { title: "æ»¤æ³¢å™¨ç±»å‹", content: "ä½é€šæ»¤æ³¢å™¨è®©é«˜é¢‘é€šè¿‡ï¼Œé«˜é€šæ»¤æ³¢å™¨è®©ä½é¢‘é€šè¿‡ï¼Œå¸¦é€šæ»¤æ³¢å™¨åªè®©ç‰¹å®šé¢‘æ®µé€šè¿‡ã€‚æ¯ç§éƒ½æœ‰ä¸åŒçš„éŸ³è‰²ç‰¹ç‚¹ã€‚" },
    { title: "åŒ…ç»œå‘ç”Ÿå™¨", content: "ADSRåŒ…ç»œæ§åˆ¶éŸ³è‰²çš„èµ·éŸ³ã€è¡°å‡ã€å»¶éŸ³ã€é‡ŠéŸ³ã€‚å¿«èµ·éŸ³é€‚åˆæ‰“å‡»ä¹ï¼Œæ…¢èµ·éŸ³é€‚åˆå¼¦ä¹ã€‚" },
    { title: "LFOåº”ç”¨", content: "LFOï¼ˆä½é¢‘æŒ¯è¡å™¨ï¼‰å¯ä»¥è°ƒåˆ¶å„ç§å‚æ•°ï¼Œåˆ›é€ é¢¤éŸ³ã€é¢¤éŸ³ã€è‡ªåŠ¨æ»¤æ³¢ç­‰æ•ˆæœã€‚é€Ÿåº¦é€šå¸¸è®¾ä¸º1-10Hzã€‚" },
    { title: "æ³¢å½¢é€‰æ‹©", content: "æ­£å¼¦æ³¢çº¯å‡€ï¼Œæ–¹æ³¢æ˜äº®ï¼Œé”¯é½¿æ³¢ä¸°å¯Œï¼Œä¸‰è§’æ³¢æŸ”å’Œã€‚ä¸åŒæ³¢å½¢é€‚åˆä¸åŒçš„éŸ³ä¹é£æ ¼ã€‚" },
    { title: "å¤±è°æ•ˆæœ", content: "è½»å¾®å¤±è°å¤šä¸ªæŒ¯è¡å™¨å¯ä»¥å¢åŠ åšåº¦å’Œå®½åº¦ã€‚å¤±è°2-5éŸ³åˆ†å¯ä»¥åˆ›é€ åˆå”±æ•ˆæœã€‚" },
    { title: "æ»¤æ³¢å™¨åŒ…ç»œ", content: "ä½¿ç”¨åŒ…ç»œè°ƒåˆ¶æ»¤æ³¢å™¨å¯ä»¥åˆ›é€ åŠ¨æ€éŸ³è‰²ã€‚ä»æ˜äº®åˆ°æš—æ·¡ï¼Œæˆ–ä»æš—æ·¡åˆ°æ˜äº®ï¼Œå¢åŠ è¡¨ç°åŠ›ã€‚" },
    { title: "éŸ³è‰²åˆ†å±‚", content: "å°†å¤šä¸ªéŸ³è‰²å±‚å å¯ä»¥åˆ›é€ æ›´ä¸°å¯Œçš„å£°éŸ³ã€‚æ¯å±‚å¯ä»¥æœ‰ä¸åŒçš„éŸ³è‰²ã€éŸ³é‡å’Œæ•ˆæœã€‚" },
    { title: "é‡‡æ ·å™¨ä½¿ç”¨", content: "é‡‡æ ·å™¨å¯ä»¥æ’­æ”¾çœŸå®ä¹å™¨çš„å½•éŸ³ã€‚ä½¿ç”¨å¤šé‡‡æ ·å¯ä»¥å¢åŠ çœŸå®æ„Ÿï¼Œä¸åŒåŠ›åº¦è§¦å‘ä¸åŒé‡‡æ ·ã€‚" },
    { title: "æ•ˆæœé“¾é¡ºåº", content: "æ•ˆæœå™¨é¡ºåºå¾ˆé‡è¦ï¼šEQâ†’å‹ç¼©â†’å¤±çœŸâ†’è°ƒåˆ¶â†’å»¶è¿Ÿâ†’æ··å“ã€‚ä½†ä¹Ÿå¯ä»¥æ‰“ç ´è§„åˆ™ï¼Œåˆ›é€ ç‹¬ç‰¹æ•ˆæœã€‚" },
    { title: "å¤±çœŸç±»å‹", content: "è½¯å¤±çœŸå¢åŠ æ¸©æš–æ„Ÿï¼Œç¡¬å¤±çœŸå¢åŠ æ”»å‡»æ€§ã€‚é€‚åº¦ä½¿ç”¨å¯ä»¥å¢åŠ éŸ³è‰²çš„ä¸ªæ€§å’Œèƒ½é‡ã€‚" },
    { title: "åˆå”±æ•ˆæœ", content: "åˆå”±æ•ˆæœé€šè¿‡è½»å¾®å»¶è¿Ÿå’ŒéŸ³é«˜è°ƒåˆ¶åˆ›é€ å®½åº¦ã€‚é€‚åˆå‰ä»–ã€é”®ç›˜å’Œåˆæˆå™¨ï¼Œå¢åŠ ç©ºé—´æ„Ÿã€‚" },
    { title: "é•¶è¾¹æ•ˆæœ", content: "é•¶è¾¹ï¼ˆFlangerï¼‰é€šè¿‡çŸ­å»¶è¿Ÿå’Œåé¦ˆåˆ›é€ 'å—–å—–'å£°ã€‚é€‚åˆèŠ‚å¥å…ƒç´ ï¼Œå¢åŠ åŠ¨æ„Ÿã€‚" },
    { title: "ç§»ç›¸æ•ˆæœ", content: "ç§»ç›¸ï¼ˆPhaserï¼‰é€šè¿‡ç›¸ä½ç§»åŠ¨åˆ›é€ æ‰«é¢‘æ•ˆæœã€‚é€‚åˆé”®ç›˜å’Œå‰ä»–ï¼Œå¢åŠ è¿·å¹»æ„Ÿã€‚" },
    { title: "éŸ³é«˜ä¿®æ­£", content: "éŸ³é«˜ä¿®æ­£å·¥å…·å¯ä»¥ä¿®æ­£éŸ³å‡†ï¼Œä½†è¦é€‚åº¦ä½¿ç”¨ã€‚è¿‡åº¦ä¿®æ­£ä¼šè®©å£°éŸ³ä¸è‡ªç„¶ï¼Œå¤±å»äººæ€§åŒ–ã€‚" },
    { title: "æ—¶é—´æ‹‰ä¼¸", content: "æ—¶é—´æ‹‰ä¼¸å¯ä»¥æ”¹å˜éŸ³é¢‘é•¿åº¦è€Œä¸æ”¹å˜éŸ³é«˜ï¼Œæˆ–æ”¹å˜éŸ³é«˜è€Œä¸æ”¹å˜é•¿åº¦ã€‚ä½†è¦å°å¿ƒéŸ³è´¨æŸå¤±ã€‚" },
    { title: "åå‘éŸ³é¢‘", content: "åå‘éŸ³é¢‘å¯ä»¥åˆ›é€ ç‹¬ç‰¹æ•ˆæœã€‚åå‘æ··å“ã€åå‘å»¶è¿Ÿå¯ä»¥å¢åŠ ç¥ç§˜æ„Ÿã€‚" },
    { title: "éŸ³è‰²è‡ªåŠ¨åŒ–", content: "è‡ªåŠ¨åŒ–æ»¤æ³¢å™¨ã€LFOã€æ•ˆæœå™¨å‚æ•°å¯ä»¥åˆ›é€ åŠ¨æ€éŸ³è‰²ã€‚è®©éŸ³è‰²åœ¨æ­Œæ›²ä¸­ä¸æ–­å˜åŒ–ã€‚" },
    { title: "å…±æŒ¯å³°", content: "å…±æŒ¯å³°æ˜¯éŸ³è‰²çš„ç‰¹å¾é¢‘ç‡ã€‚ä½¿ç”¨å…±æŒ¯å³°æ»¤æ³¢å™¨å¯ä»¥æ¨¡æ‹Ÿä¸åŒä¹å™¨çš„éŸ³è‰²ç‰¹ç‚¹ã€‚" },
    { title: "FMåˆæˆ", content: "FMåˆæˆé€šè¿‡é¢‘ç‡è°ƒåˆ¶åˆ›é€ å¤æ‚éŸ³è‰²ã€‚å¯ä»¥äº§ç”Ÿä»çº¯å‡€åˆ°å°–é”çš„å„ç§éŸ³è‰²ã€‚" },
    { title: "å‡æ³•åˆæˆ", content: "å‡æ³•åˆæˆä»ä¸°å¯Œæ³¢å½¢å¼€å§‹ï¼Œé€šè¿‡æ»¤æ³¢å»é™¤ä¸éœ€è¦çš„é¢‘ç‡ã€‚è¿™æ˜¯æœ€å¸¸ç”¨çš„åˆæˆæ–¹æ³•ã€‚" },
    { title: "åŠ æ³•åˆæˆ", content: "åŠ æ³•åˆæˆé€šè¿‡å åŠ å¤šä¸ªæ­£å¼¦æ³¢åˆ›é€ éŸ³è‰²ã€‚å¯ä»¥ç²¾ç¡®æ§åˆ¶æ¯ä¸ªè°æ³¢ï¼Œä½†è®¡ç®—é‡å¤§ã€‚" },
    { title: "æ³¢è¡¨åˆæˆ", content: "æ³¢è¡¨åˆæˆä½¿ç”¨é¢„å®šä¹‰çš„æ³¢å½¢è¡¨ï¼Œé€šè¿‡æ‰«æåˆ›é€ åŠ¨æ€éŸ³è‰²ã€‚é€‚åˆåˆ›é€ ä¸æ–­å˜åŒ–çš„éŸ³è‰²ã€‚" },
    { title: "é¢—ç²’åˆæˆ", content: "é¢—ç²’åˆæˆå°†éŸ³é¢‘åˆ†æˆå°é¢—ç²’ï¼Œé‡æ–°ç»„åˆåˆ›é€ æ–°éŸ³è‰²ã€‚å¯ä»¥åˆ›é€ ç‹¬ç‰¹çš„å£°éŸ³çº¹ç†ã€‚" },
    { title: "ç‰©ç†å»ºæ¨¡", content: "ç‰©ç†å»ºæ¨¡æ¨¡æ‹ŸçœŸå®ä¹å™¨çš„ç‰©ç†ç‰¹æ€§ã€‚å¯ä»¥åˆ›é€ éå¸¸çœŸå®çš„éŸ³è‰²ï¼Œä½†è®¡ç®—å¤æ‚ã€‚" },
    { title: "é‡‡æ ·åˆæˆ", content: "é‡‡æ ·åˆæˆç»“åˆé‡‡æ ·å’ŒåˆæˆæŠ€æœ¯ã€‚ä½¿ç”¨çœŸå®é‡‡æ ·ä½œä¸ºèµ·ç‚¹ï¼Œé€šè¿‡åˆæˆæŠ€æœ¯ä¿®æ”¹ã€‚" },
    { title: "éŸ³è‰²é¢„è®¾", content: "ä½¿ç”¨éŸ³è‰²é¢„è®¾å¯ä»¥å¿«é€Ÿå¼€å§‹ï¼Œä½†ä¸è¦å®Œå…¨ä¾èµ–ã€‚ä¿®æ”¹é¢„è®¾å¯ä»¥åˆ›é€ ç‹¬ç‰¹çš„éŸ³è‰²ã€‚" },
    { title: "éŸ³è‰²å¯¹æ¯”", content: "åœ¨ç¼–æ›²ä¸­ä½¿ç”¨å¯¹æ¯”éŸ³è‰²å¯ä»¥å¢åŠ è¶£å‘³æ€§ã€‚æ˜äº®ä¸æš—æ·¡ï¼Œæ¸©æš–ä¸å†°å†·ï¼Œåˆ›é€ å¼ åŠ›ã€‚" },
    { title: "éŸ³è‰²è¿›åŒ–", content: "è®©éŸ³è‰²åœ¨æ­Œæ›²ä¸­è¿›åŒ–ã€‚ä»ç®€å•å¼€å§‹ï¼Œé€æ¸å¢åŠ å¤æ‚æ€§ï¼Œåˆ›é€ åŠ¨æ€æ„Ÿã€‚" },
    { title: "ç¯å¢ƒéŸ³è‰²", content: "ç¯å¢ƒéŸ³è‰²å¯ä»¥å¢åŠ æ°›å›´æ„Ÿã€‚ä½¿ç”¨é•¿æ··å“ã€å»¶è¿Ÿã€éŸ³è‰²å«å¯ä»¥åˆ›é€ ç©ºé—´æ„Ÿã€‚" },
    
    // å’Œå£°ç†è®º (91-120)
    { title: "ä¸‰å’Œå¼¦", content: "å¤§ä¸‰å’Œå¼¦æ˜äº®ï¼Œå°ä¸‰å’Œå¼¦æŸ”å’Œï¼Œå‡ä¸‰å’Œå¼¦ç´§å¼ ï¼Œå¢ä¸‰å’Œå¼¦ç¥ç§˜ã€‚äº†è§£æ¯ç§å’Œå¼¦çš„æƒ…æ„Ÿè‰²å½©ã€‚" },
    { title: "ä¸ƒå’Œå¼¦", content: "å¤§ä¸ƒå’Œå¼¦çˆµå£«æ„Ÿï¼Œå°ä¸ƒå’Œå¼¦æŸ”å’Œï¼Œå±ä¸ƒå’Œå¼¦éœ€è¦è§£å†³ï¼ŒåŠå‡ä¸ƒå’Œå¼¦å¤æ‚ã€‚ä¸ƒå’Œå¼¦å¢åŠ å’Œå£°è‰²å½©ã€‚" },
    { title: "å»¶ä¼¸éŸ³", content: "ä¹éŸ³ã€åä¸€éŸ³ã€åä¸‰éŸ³å¯ä»¥å¢åŠ å’Œå£°å¤æ‚æ€§ã€‚ä½†è¦å°å¿ƒä½¿ç”¨ï¼Œé¿å…è¿‡åº¦å¤æ‚ã€‚" },
    { title: "è½¬ä½å’Œå¼¦", content: "è½¬ä½å’Œå¼¦æ”¹å˜ä½éŸ³ï¼Œåˆ›é€ ä¸åŒçš„å’Œå£°æ„Ÿè§‰ã€‚ç¬¬ä¸€è½¬ä½ã€ç¬¬äºŒè½¬ä½å„æœ‰ç‰¹ç‚¹ã€‚" },
    { title: "å’Œå£°åŠŸèƒ½", content: "ä¸»å’Œå¼¦ç¨³å®šï¼Œå±å’Œå¼¦éœ€è¦è§£å†³ï¼Œä¸‹å±å’Œå¼¦è¿‡æ¸¡ã€‚äº†è§£åŠŸèƒ½å¯ä»¥åˆ›é€ æµç•…çš„å’Œå£°è¿›è¡Œã€‚" },
    { title: "è°ƒæ€§ä¸­å¿ƒ", content: "æ˜ç¡®è°ƒæ€§ä¸­å¿ƒå¯ä»¥è®©éŸ³ä¹æœ‰æ–¹å‘æ„Ÿã€‚ä¸»éŸ³æ˜¯'å®¶'ï¼Œå…¶ä»–å’Œå¼¦éƒ½æŒ‡å‘å®ƒã€‚" },
    { title: "å’Œå£°èŠ‚å¥", content: "å’Œå£°å˜åŒ–çš„é¢‘ç‡å½±å“éŸ³ä¹æ„Ÿè§‰ã€‚å¿«é€Ÿå˜åŒ–å¢åŠ ç´§å¼ æ„Ÿï¼Œæ…¢é€Ÿå˜åŒ–æ›´ç¨³å®šã€‚" },
    { title: "å’Œå£°å¯†åº¦", content: "å’Œå£°å¯†åº¦æŒ‡åŒæ—¶å‘å£°çš„éŸ³ç¬¦æ•°é‡ã€‚ç¨€ç–å’Œå£°æ›´å¼€æ”¾ï¼Œå¯†é›†å’Œå£°æ›´ä¸°å¯Œã€‚" },
    { title: "å£°éƒ¨è¿›è¡Œ", content: "å£°éƒ¨è¿›è¡Œè¦æµç•…ï¼Œé¿å…å¤§è·³ã€‚å¹³è¡Œè¿›è¡Œè¦å°å¿ƒï¼Œé¿å…å¹³è¡Œäº”åº¦å’Œå¹³è¡Œå…«åº¦ã€‚" },
    { title: "å¯¹ä½æ³•", content: "å¯¹ä½æ³•è®©å¤šä¸ªæ—‹å¾‹çº¿ç‹¬ç«‹åˆå’Œè°ã€‚é€‚åˆå¤è°ƒéŸ³ä¹ï¼Œå¢åŠ å¤æ‚æ€§ã€‚" },
    { title: "å’Œå£°æ›¿æ¢", content: "å’Œå£°æ›¿æ¢ç”¨ç›¸å…³å’Œå¼¦æ›¿ä»£åŸå’Œå¼¦ï¼Œå¢åŠ è‰²å½©ã€‚å¦‚ç”¨IImæ›¿ä»£IVï¼Œç”¨bIIImæ›¿ä»£Vã€‚" },
    { title: "è°ƒå¼äº’æ¢", content: "ä»å…³ç³»å¤§å°è°ƒå€Ÿç”¨å’Œå¼¦å¯ä»¥å¢åŠ è‰²å½©ã€‚å¦‚å¤§è°ƒä¸­ä½¿ç”¨å°è°ƒå’Œå¼¦ï¼Œæˆ–åä¹‹ã€‚" },
    { title: "å‰¯å±å’Œå¼¦", content: "å‰¯å±å’Œå¼¦æ˜¯å…¶ä»–è°ƒçš„å±å’Œå¼¦ï¼Œåˆ›é€ ä¸´æ—¶è½¬è°ƒæ„Ÿã€‚å¢åŠ å’Œå£°çš„å¤æ‚æ€§å’Œè‰²å½©ã€‚" },
    { title: "ç»è¿‡å’Œå¼¦", content: "ç»è¿‡å’Œå¼¦è¿æ¥ä¸¤ä¸ªä¸»è¦å’Œå¼¦ï¼Œåˆ›é€ æµç•…è¿‡æ¸¡ã€‚å¯ä»¥æ˜¯ç»è¿‡éŸ³å½¢æˆçš„å’Œå¼¦ã€‚" },
    { title: "æŒ‚ç•™å’Œå¼¦", content: "æŒ‚ç•™å’Œå¼¦å»¶è¿Ÿè§£å†³ï¼Œå¢åŠ ç´§å¼ æ„Ÿã€‚æŒ‚äºŒå’Œå¼¦ã€æŒ‚å››å’Œå¼¦å„æœ‰ç‰¹ç‚¹ã€‚" },
    { title: "åŠ éŸ³å’Œå¼¦", content: "åŠ éŸ³å’Œå¼¦åœ¨åŸºç¡€å’Œå¼¦ä¸Šæ·»åŠ éŸ³ç¨‹ã€‚åŠ äºŒåº¦ã€åŠ å››åº¦ã€åŠ å…­åº¦å¯ä»¥å¢åŠ è‰²å½©ã€‚" },
    { title: "çœç•¥éŸ³", content: "çœç•¥å’Œå¼¦ä¸­çš„æŸäº›éŸ³å¯ä»¥åˆ›é€ ä¸åŒæ„Ÿè§‰ã€‚çœç•¥ä¸‰åº¦åˆ›é€ å¼€æ”¾æ„Ÿï¼Œçœç•¥äº”åº¦å¢åŠ ä¸ç¨³å®šæ€§ã€‚" },
    { title: "å’Œå£°å¤–éŸ³", content: "å’Œå£°å¤–éŸ³ä¸å±äºå’Œå¼¦ï¼Œä½†å¢åŠ æ—‹å¾‹æ€§ã€‚ç»è¿‡éŸ³ã€è¾…åŠ©éŸ³ã€å…ˆç°éŸ³ã€å»¶ç•™éŸ³å„æœ‰ç‰¹ç‚¹ã€‚" },
    { title: "å’Œå£°åˆ†æ", content: "åˆ†æç»å…¸æ­Œæ›²çš„å’Œå£°è¿›è¡Œï¼Œå­¦ä¹ æˆåŠŸçš„æ¨¡å¼ã€‚ä½†ä¸è¦å®Œå…¨æ¨¡ä»¿ï¼Œè¦åœ¨æ­¤åŸºç¡€ä¸Šåˆ›æ–°ã€‚" },
    { title: "å’Œå£°åˆ›æ–°", content: "æ‰“ç ´ä¼ ç»Ÿå’Œå£°è§„åˆ™å¯ä»¥åˆ›é€ ç‹¬ç‰¹æ„Ÿã€‚ä½†è¦ç†è§£è§„åˆ™ï¼Œæ‰èƒ½æœ‰æ•ˆæ‰“ç ´ã€‚" },
    { title: "è°ƒå¼éŸ³é˜¶", content: "ä¸åŒè°ƒå¼æœ‰ä¸åŒçš„æƒ…æ„Ÿè‰²å½©ã€‚å¤§è°ƒæ˜äº®ï¼Œå°è°ƒæŸ”å’Œï¼Œå¤šåˆ©äºšè°ƒå¼ç¥ç§˜ï¼Œæ··åˆåˆ©åº•äºšè°ƒå¼çˆµå£«æ„Ÿã€‚" },
    { title: "äº”å£°éŸ³é˜¶", content: "äº”å£°éŸ³é˜¶åªæœ‰äº”ä¸ªéŸ³ï¼Œé¿å…ä¸å’Œè°éŸ³ç¨‹ã€‚é€‚åˆå³å…´å’Œæ—‹å¾‹åˆ›ä½œï¼Œå®¹æ˜“ä¸Šæ‰‹ã€‚" },
    { title: "è“è°ƒéŸ³é˜¶", content: "è“è°ƒéŸ³é˜¶åŠ å…¥é™ä¸‰ã€é™äº”ã€é™ä¸ƒéŸ³ï¼Œåˆ›é€ è“è°ƒæ„Ÿã€‚é€‚åˆå¸ƒé²æ–¯ã€æ‘‡æ»šã€çˆµå£«ã€‚" },
    { title: "å…¨éŸ³é˜¶", content: "å…¨éŸ³é˜¶æ¯ä¸ªéŸ³ä¹‹é—´éƒ½æ˜¯å…¨éŸ³ï¼Œåˆ›é€ ç¥ç§˜æ„Ÿã€‚é€‚åˆå°è±¡æ´¾éŸ³ä¹ï¼Œå¢åŠ ä¸ç¨³å®šæ€§ã€‚" },
    { title: "åŠéŸ³é˜¶", content: "åŠéŸ³é˜¶åŒ…å«æ‰€æœ‰12ä¸ªéŸ³ï¼Œåˆ›é€ ç´§å¼ æ„Ÿã€‚é€‚åˆç°ä»£éŸ³ä¹ï¼Œå¢åŠ å¤æ‚æ€§ã€‚" },
    { title: "å’Œå£°å°è°ƒ", content: "å’Œå£°å°è°ƒå‡é«˜ä¸ƒåº¦ï¼Œåˆ›é€ å¯¼éŸ³ã€‚å¢åŠ å‘ä¸»éŸ³çš„å€¾å‘æ€§ï¼Œé€‚åˆå¤å…¸éŸ³ä¹ã€‚" },
    { title: "æ—‹å¾‹å°è°ƒ", content: "æ—‹å¾‹å°è°ƒä¸Šè¡Œå‡é«˜å…­ã€ä¸ƒåº¦ï¼Œä¸‹è¡Œè¿˜åŸã€‚åˆ›é€ æµç•…çš„æ—‹å¾‹çº¿ã€‚" },
    { title: "è°ƒå¼æ··åˆ", content: "åœ¨åŒä¸€é¦–æ­Œæ›²ä¸­æ··åˆä¸åŒè°ƒå¼å¯ä»¥å¢åŠ è‰²å½©ã€‚ä½†è¦ç¡®ä¿è¿‡æ¸¡è‡ªç„¶ã€‚" },
    { title: "å’Œå£°å¼ åŠ›", content: "å’Œå£°å¼ åŠ›æ¥è‡ªä¸åå’ŒéŸ³ç¨‹ã€‚é€‚åº¦å¼ åŠ›å¢åŠ è¶£å‘³æ€§ï¼Œè¿‡åº¦å¼ åŠ›å¯èƒ½ä¸æ‚¦è€³ã€‚" },
    { title: "å’Œå£°è§£å†³", content: "ä¸åå’Œå’Œå¼¦éœ€è¦è§£å†³åˆ°åå’Œå’Œå¼¦ã€‚å±ä¸ƒåˆ°ä¸»æ˜¯æœ€å¸¸è§çš„è§£å†³ï¼Œåˆ›é€ æ»¡è¶³æ„Ÿã€‚" },
    
    // èŠ‚å¥ä¸èŠ‚æ‹ (121-150)
    { title: "èŠ‚æ‹ç±»å‹", content: "4/4æ‹æœ€å¸¸è§ï¼Œé€‚åˆå¤§å¤šæ•°é£æ ¼ã€‚3/4æ‹é€‚åˆåå°”å…¹ï¼Œ6/8æ‹é€‚åˆæŠ’æƒ…ï¼Œ5/4æ‹åˆ›é€ ä¸è§„åˆ™æ„Ÿã€‚" },
    { title: "åˆ‡åˆ†éŸ³", content: "åˆ‡åˆ†éŸ³æ‰“ç ´å¸¸è§„é‡éŸ³ï¼Œåˆ›é€ èŠ‚å¥æ„Ÿã€‚é€‚åˆçˆµå£«ã€æ‹‰ä¸ã€æ”¾å…‹éŸ³ä¹ã€‚" },
    { title: "ä¸‰è¿éŸ³", content: "ä¸‰è¿éŸ³å°†ä¸€æ‹åˆ†æˆä¸‰ç­‰åˆ†ï¼Œåˆ›é€ æµç•…æ„Ÿã€‚é€‚åˆçˆµå£«ã€è“è°ƒã€æ‘‡æ»šã€‚" },
    { title: "å¤èŠ‚å¥", content: "å¤èŠ‚å¥åŒæ—¶ä½¿ç”¨ä¸åŒçš„èŠ‚å¥å‹ï¼Œåˆ›é€ å¤æ‚æ€§ã€‚å¦‚3å¯¹2ï¼Œ4å¯¹3ç­‰ã€‚" },
    { title: "èŠ‚å¥å¯†åº¦", content: "èŠ‚å¥å¯†åº¦æŒ‡å•ä½æ—¶é—´å†…çš„éŸ³ç¬¦æ•°é‡ã€‚ç¨€ç–åˆ›é€ ç©ºé—´æ„Ÿï¼Œå¯†é›†å¢åŠ èƒ½é‡ã€‚" },
    { title: "é‡éŸ³ä½ç½®", content: "æ”¹å˜é‡éŸ³ä½ç½®å¯ä»¥åˆ›é€ ä¸åŒæ„Ÿè§‰ã€‚åæ‹é‡éŸ³åˆ›é€ å¾‹åŠ¨æ„Ÿï¼Œå¼±æ‹é‡éŸ³å¢åŠ å¤æ‚æ€§ã€‚" },
    { title: "ä¼‘æ­¢ç¬¦", content: "ä¼‘æ­¢ç¬¦å’ŒéŸ³ç¬¦åŒæ ·é‡è¦ã€‚é€‚å½“çš„ä¼‘æ­¢å¯ä»¥å¢åŠ èŠ‚å¥æ„Ÿå’Œç©ºé—´æ„Ÿã€‚" },
    { title: "èŠ‚å¥å˜åŒ–", content: "åœ¨æ­Œæ›²ä¸­æ”¹å˜èŠ‚å¥å¯ä»¥å¢åŠ è¶£å‘³æ€§ã€‚ä¸»æ­Œå’Œå‰¯æ­Œå¯ä»¥æœ‰ä¸åŒçš„èŠ‚å¥å¯†åº¦ã€‚" },
    { title: "èŠ‚å¥å‹é‡å¤", content: "é‡å¤èŠ‚å¥å‹å¯ä»¥åˆ›é€ å¾‹åŠ¨æ„Ÿï¼Œä½†è¦é€‚å½“å˜åŒ–ï¼Œé¿å…å•è°ƒã€‚" },
    { title: "èŠ‚å¥å±‚æ¬¡", content: "ä¸åŒä¹å™¨å¯ä»¥æ¼”å¥ä¸åŒçš„èŠ‚å¥å‹ï¼Œåˆ›é€ å±‚æ¬¡æ„Ÿã€‚åº•é¼“ã€å†›é¼“ã€é•²ç‰‡å„æœ‰èŠ‚å¥ã€‚" },
    { title: "èŠ‚å¥åŒæ­¥", content: "ç¡®ä¿æ‰€æœ‰èŠ‚å¥å…ƒç´ åŒæ­¥ã€‚ä½¿ç”¨èŠ‚æ‹å™¨æˆ–é‡åŒ–åŠŸèƒ½ï¼Œä½†ä¹Ÿè¦ä¿ç•™äººæ€§åŒ–ã€‚" },
    { title: "èŠ‚å¥é‡åŒ–", content: "é‡åŒ–å¯ä»¥è®©èŠ‚å¥æ›´ç²¾ç¡®ï¼Œä½†è¿‡åº¦é‡åŒ–ä¼šå¤±å»äººæ€§åŒ–ã€‚é€‚åº¦é‡åŒ–ï¼Œä¿ç•™è½»å¾®ä¸å®Œç¾ã€‚" },
    { title: "æ‘‡æ‘†æ„Ÿ", content: "æ‘‡æ‘†æ„Ÿæ¥è‡ªè½»å¾®çš„æ—¶é—´åç§»ã€‚ä¸‰è¿éŸ³çš„ç¬¬äºŒã€ä¸‰ä¸ªéŸ³å¯ä»¥ç¨å¾®å»¶è¿Ÿï¼Œåˆ›é€ æ‘‡æ‘†ã€‚" },
    { title: "èŠ‚å¥å¡«å……", content: "èŠ‚å¥å¡«å……åœ¨æ®µè½ä¹‹é—´å¢åŠ è¶£å‘³æ€§ã€‚å¯ä»¥æ˜¯é¼“çš„å¡«å……ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ä¹å™¨çš„è£…é¥°ã€‚" },
    { title: "èŠ‚å¥ç®€åŒ–", content: "æœ‰æ—¶ç®€åŒ–èŠ‚å¥æ¯”å¤æ‚æ›´å¥½ã€‚ç®€å•çš„èŠ‚å¥æ›´å®¹æ˜“è®©äººè®°ä½å’Œè·Ÿéšã€‚" },
    { title: "èŠ‚å¥å¯¹æ¯”", content: "é€šè¿‡èŠ‚å¥å¯¹æ¯”åˆ›é€ å¼ åŠ›ã€‚å¿«æ…¢å¯¹æ¯”ã€ç¨€ç–å¯†é›†å¯¹æ¯”å¯ä»¥å¢åŠ è¶£å‘³æ€§ã€‚" },
    { title: "èŠ‚å¥åŠ¨æœº", content: "èŠ‚å¥åŠ¨æœºæ˜¯çŸ­å°çš„èŠ‚å¥æ¨¡å¼ï¼Œå¯ä»¥é‡å¤å’Œå‘å±•ã€‚åˆ›é€ ç»Ÿä¸€æ„Ÿå’Œè®°å¿†ç‚¹ã€‚" },
    { title: "èŠ‚å¥å˜å¥", content: "åœ¨é‡å¤çš„åŸºç¡€ä¸Šå˜åŒ–èŠ‚å¥ï¼Œä¿æŒæ–°é²œæ„Ÿã€‚å¯ä»¥æ”¹å˜é‡éŸ³ã€å¯†åº¦ã€æˆ–èŠ‚å¥å‹ã€‚" },
    { title: "èŠ‚å¥å¯¹è¯", content: "ä¸åŒä¹å™¨ä¹‹é—´çš„èŠ‚å¥å¯¹è¯å¯ä»¥å¢åŠ è¶£å‘³æ€§ã€‚ä¸€é—®ä¸€ç­”ï¼Œåˆ›é€ äº’åŠ¨æ„Ÿã€‚" },
    { title: "èŠ‚å¥å¼ åŠ›", content: "é€šè¿‡èŠ‚å¥åˆ›é€ å¼ åŠ›ã€‚åŠ é€Ÿã€å‡é€Ÿã€åˆ‡åˆ†ã€ä¼‘æ­¢éƒ½å¯ä»¥å¢åŠ ç´§å¼ æ„Ÿã€‚" },
    { title: "èŠ‚å¥é‡Šæ”¾", content: "åœ¨ç´§å¼ ä¹‹åé‡Šæ”¾ï¼Œåˆ›é€ æ»¡è¶³æ„Ÿã€‚å¤æ‚èŠ‚å¥åç®€åŒ–ï¼Œå¿«é€Ÿåæ”¾æ…¢ã€‚" },
    { title: "èŠ‚å¥è®°å¿†", content: "åˆ›é€ å®¹æ˜“è®°ä½çš„èŠ‚å¥å‹ã€‚ç®€å•çš„é‡å¤æ¨¡å¼æ›´å®¹æ˜“è®©å¬ä¼—è·Ÿéšã€‚" },
    { title: "èŠ‚å¥åˆ›æ–°", content: "å°è¯•ä¸å¸¸è§çš„èŠ‚å¥å‹ã€‚å¥‡æ•°æ‹ã€å¤èŠ‚å¥ã€ä¸è§„åˆ™é‡éŸ³å¯ä»¥åˆ›é€ ç‹¬ç‰¹æ„Ÿã€‚" },
    { title: "èŠ‚å¥å¹³è¡¡", content: "å¹³è¡¡å¤æ‚å’Œç®€å•ã€‚å¤ªå¤æ‚å¯èƒ½éš¾ä»¥è·Ÿéšï¼Œå¤ªç®€å•å¯èƒ½å•è°ƒã€‚" },
    { title: "èŠ‚å¥å‘å±•", content: "è®©èŠ‚å¥åœ¨æ­Œæ›²ä¸­å‘å±•ã€‚ä»ç®€å•å¼€å§‹ï¼Œé€æ¸å¢åŠ å¤æ‚æ€§ã€‚" },
    { title: "èŠ‚å¥ç»Ÿä¸€", content: "ä¿æŒèŠ‚å¥çš„ç»Ÿä¸€æ€§ã€‚è™½ç„¶å¯ä»¥å˜åŒ–ï¼Œä½†è¦æœ‰å…±åŒçš„åŸºç¡€ã€‚" },
    { title: "èŠ‚å¥ç©ºé—´", content: "ç»™èŠ‚å¥ç•™å‡ºç©ºé—´ã€‚ä¸è¦æ¯ä¸ªæ‹å­éƒ½å¡«æ»¡ï¼Œé€‚å½“çš„ä¼‘æ­¢å¢åŠ å‘¼å¸æ„Ÿã€‚" },
    { title: "èŠ‚å¥èƒ½é‡", content: "é€šè¿‡èŠ‚å¥æ§åˆ¶èƒ½é‡ã€‚å¯†é›†èŠ‚å¥å¢åŠ èƒ½é‡ï¼Œç¨€ç–èŠ‚å¥é™ä½èƒ½é‡ã€‚" },
    { title: "èŠ‚å¥æƒ…æ„Ÿ", content: "ä¸åŒèŠ‚å¥ä¼ è¾¾ä¸åŒæƒ…æ„Ÿã€‚å¿«é€ŸèŠ‚å¥å…´å¥‹ï¼Œæ…¢é€ŸèŠ‚å¥å¹³é™ï¼Œä¸è§„åˆ™èŠ‚å¥ç´§å¼ ã€‚" },
    { title: "èŠ‚å¥æŠ€å·§", content: "å­¦ä¹ å„ç§èŠ‚å¥æŠ€å·§ï¼šåˆ‡åˆ†ã€ä¸‰è¿éŸ³ã€å¤èŠ‚å¥ã€æ‘‡æ‘†ã€å¡«å……ç­‰ã€‚çµæ´»è¿ç”¨ã€‚" },
    
    // å·¥ä½œæµç¨‹ä¸æŠ€å·§ (151-180)
    { title: "é¡¹ç›®ç»„ç»‡", content: "ä¿æŒé¡¹ç›®æ–‡ä»¶æ•´æ´ã€‚ä½¿ç”¨æ¸…æ™°çš„è½¨é“å‘½åï¼Œåˆ†ç»„ç›¸å…³è½¨é“ï¼Œä½¿ç”¨é¢œè‰²æ ‡è®°ã€‚" },
    { title: "æ¨¡æ¿ä½¿ç”¨", content: "åˆ›å»ºæ··éŸ³æ¨¡æ¿å¯ä»¥èŠ‚çœæ—¶é—´ã€‚é¢„è®¾å¸¸ç”¨æ•ˆæœå™¨ã€è·¯ç”±ã€æ€»çº¿è®¾ç½®ã€‚" },
    { title: "ç‰ˆæœ¬æ§åˆ¶", content: "å®šæœŸä¿å­˜é¡¹ç›®ç‰ˆæœ¬ã€‚ä½¿ç”¨æ—¥æœŸæˆ–ç‰ˆæœ¬å·å‘½åï¼Œæ–¹ä¾¿å›æº¯åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ã€‚" },
    { title: "å¤‡ä»½ä¹ æƒ¯", content: "å®šæœŸå¤‡ä»½é¡¹ç›®æ–‡ä»¶ã€‚ä½¿ç”¨äº‘å­˜å‚¨æˆ–å¤–éƒ¨ç¡¬ç›˜ï¼Œé¿å…ä¸¢å¤±å·¥ä½œã€‚" },
    { title: "å‚è€ƒè½¨é“", content: "åœ¨é¡¹ç›®ä¸­åŠ è½½å‚è€ƒè½¨é“ï¼Œæ–¹ä¾¿å¯¹æ¯”ã€‚ä½†è¦åœ¨æ··éŸ³å‰è®¾ç½®å¥½ç”µå¹³ï¼Œé¿å…è¯¯å¯¼ã€‚" },
    { title: "ç›‘å¬éŸ³é‡", content: "æ··éŸ³æ—¶ä¿æŒé€‚ä¸­çš„ç›‘å¬éŸ³é‡ã€‚å¤ªå¤§ä¼šç–²åŠ³è€³æœµï¼Œå¤ªå°ä¼šé”™è¿‡ç»†èŠ‚ã€‚é€šå¸¸75-85dB SPLã€‚" },
    { title: "ä¼‘æ¯é—´éš”", content: "æ¯å·¥ä½œ45-60åˆ†é’Ÿä¼‘æ¯10-15åˆ†é’Ÿã€‚è®©è€³æœµæ¢å¤ï¼Œé¿å…ç–²åŠ³å¯¼è‡´çš„é”™è¯¯åˆ¤æ–­ã€‚" },
    { title: "æ–°é²œè€³æœµ", content: "ç¬¬äºŒå¤©å†å¬æ··éŸ³ï¼Œç”¨æ–°é²œè€³æœµåˆ¤æ–­ã€‚å¯èƒ½ä¼šå‘ç°ä¹‹å‰æ²¡æ³¨æ„åˆ°çš„é—®é¢˜ã€‚" },
    { title: "å•å£°é“æ£€æŸ¥", content: "ç»å¸¸åˆ‡æ¢åˆ°å•å£°é“æ£€æŸ¥ã€‚å¦‚æœå•å£°é“å¬èµ·æ¥å¥½ï¼Œç«‹ä½“å£°é€šå¸¸ä¹Ÿä¼šå¥½ã€‚" },
    { title: "ä¸åŒè®¾å¤‡", content: "åœ¨ä¸åŒè®¾å¤‡ä¸Šæµ‹è¯•ï¼šè€³æœºã€éŸ³ç®±ã€æ‰‹æœºã€æ±½è½¦éŸ³å“ã€‚ç¡®ä¿åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šéƒ½å¥½å¬ã€‚" },
    { title: "é¢‘ç‡æ‰«é¢‘", content: "ä½¿ç”¨æ‰«é¢‘EQæ‰¾åˆ°é—®é¢˜é¢‘ç‡ã€‚æå‡ä¸€ä¸ªçª„é¢‘æ®µï¼Œæ‰«è¿‡æ•´ä¸ªé¢‘è°±ï¼Œæ‰¾åˆ°éœ€è¦å¤„ç†çš„é¢‘ç‡ã€‚" },
    { title: "é™éŸ³æŠ€å·§", content: "é€ä¸ªé™éŸ³è½¨é“ï¼Œæ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚å¦‚æœé™éŸ³åæ··éŸ³æ›´å¥½ï¼Œè¯´æ˜è¿™ä¸ªè½¨é“æœ‰é—®é¢˜ã€‚" },
    { title: "ç‹¬å¥æŠ€å·§", content: "ç‹¬å¥è½¨é“æ£€æŸ¥ï¼Œä½†ä¸è¦åªä¾èµ–ç‹¬å¥ã€‚åœ¨ä¸Šä¸‹æ–‡ä¸­åˆ¤æ–­ï¼Œå› ä¸ºç‹¬å¥æ—¶å¬èµ·æ¥å¥½çš„ï¼Œåœ¨æ··éŸ³ä¸­å¯èƒ½ä¸å¥½ã€‚" },
    { title: "å¯¹æ¯”æŠ€å·§", content: "ç»å¸¸å¯¹æ¯”å¤„ç†å‰åã€‚ä½¿ç”¨æ—è·¯åŠŸèƒ½ï¼Œç¡®ä¿å¤„ç†çœŸçš„æ”¹å–„äº†å£°éŸ³ã€‚" },
    { title: "æ¸è¿›å¤„ç†", content: "æ¸è¿›åœ°åº”ç”¨å¤„ç†ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å¤§å¹…è°ƒæ•´ã€‚å°å¹…åº¦å¤šæ¬¡è°ƒæ•´æ¯”å¤§å¹…åº¦ä¸€æ¬¡è°ƒæ•´æ›´å®‰å…¨ã€‚" },
    { title: "é¢„è®¾èµ·ç‚¹", content: "ä½¿ç”¨é¢„è®¾ä½œä¸ºèµ·ç‚¹ï¼Œä½†è¦æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ã€‚æ²¡æœ‰ä¸‡èƒ½çš„é¢„è®¾ã€‚" },
    { title: "å­¦ä¹ åˆ†æ", content: "åˆ†æä½ å–œæ¬¢çš„æ­Œæ›²ã€‚ä½¿ç”¨é¢‘è°±åˆ†æã€ç›¸ä½åˆ†æç­‰å·¥å…·ï¼Œå­¦ä¹ æˆåŠŸçš„æ··éŸ³æŠ€å·§ã€‚" },
    { title: "å®éªŒç²¾ç¥", content: "ä¸è¦å®³æ€•å®éªŒã€‚å°è¯•ä¸åŒçš„æ•ˆæœå™¨ç»„åˆã€å‚æ•°è®¾ç½®ï¼Œå¯èƒ½ä¼šå‘ç°æ–°çš„å£°éŸ³ã€‚" },
    { title: "ç®€åŒ–åŸåˆ™", content: "å¦‚æœæ··éŸ³æœ‰é—®é¢˜ï¼Œå…ˆå°è¯•ç®€åŒ–è€Œä¸æ˜¯æ·»åŠ ã€‚ç§»é™¤æ•ˆæœå™¨ï¼Œé™ä½å¤„ç†ï¼Œå¯èƒ½å°±è§£å†³äº†ã€‚" },
    { title: "ç›®æ ‡æ˜ç¡®", content: "åœ¨å¼€å§‹æ··éŸ³å‰æ˜ç¡®ç›®æ ‡ã€‚æƒ³è¦ä»€ä¹ˆé£æ ¼ï¼Ÿä»€ä¹ˆæ„Ÿè§‰ï¼Ÿæœ‰äº†ç›®æ ‡æ‰èƒ½åšå‡ºæ­£ç¡®çš„å†³å®šã€‚" },
    { title: "ä¼˜å…ˆçº§", content: "ä¼˜å…ˆå¤„ç†æœ€é‡è¦çš„å…ƒç´ ã€‚ä¸»å”±ã€åº•é¼“ã€è´æ–¯é€šå¸¸æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„ã€‚" },
    { title: "æ•´ä½“æ€ç»´", content: "å§‹ç»ˆä»æ•´ä½“è§’åº¦æ€è€ƒã€‚å•ä¸ªå…ƒç´ å¯èƒ½å¬èµ·æ¥ä¸é”™ï¼Œä½†è¦åœ¨æ•´ä½“æ··éŸ³ä¸­åˆ¤æ–­ã€‚" },
    { title: "ç»†èŠ‚å¤„ç†", content: "æ³¨æ„ç»†èŠ‚ï¼Œä½†ä¸è¦è¿‡åº¦ã€‚å¾®å°çš„è°ƒæ•´å¯ä»¥å¸¦æ¥å·¨å¤§æ”¹å–„ï¼Œä½†è¿‡åº¦å¤„ç†ä¼šé€‚å¾—å…¶åã€‚" },
    { title: "æ—¶é—´ç®¡ç†", content: "åˆç†åˆ†é…æ—¶é—´ã€‚ä¸è¦åœ¨ä¸€ä¸ªå…ƒç´ ä¸ŠèŠ±è´¹å¤ªå¤šæ—¶é—´ï¼Œä¿æŒæ•´ä½“è¿›åº¦ã€‚" },
    { title: "å†³ç­–é€Ÿåº¦", content: "å¿«é€Ÿåšå‡ºå†³å®šï¼Œä¸è¦è¿‡åº¦çº ç»“ã€‚é€šå¸¸ç¬¬ä¸€ç›´è§‰æ˜¯å¯¹çš„ï¼Œè¿‡åº¦æ€è€ƒå¯èƒ½å¯¼è‡´è¿‡åº¦å¤„ç†ã€‚" },
    { title: "å®Œæˆæ¯”å®Œç¾", content: "å®Œæˆæ¯”å®Œç¾æ›´é‡è¦ã€‚ä¸è¦ä¸ºäº†è¿½æ±‚å®Œç¾è€Œæ°¸è¿œä¸å®Œæˆã€‚å¯ä»¥åç»­å†æ”¹è¿›ã€‚" },
    { title: "æ¥å—ä¸å®Œç¾", content: "æ¥å—ä¸å®Œç¾ã€‚æ²¡æœ‰å®Œç¾çš„æ··éŸ³ï¼Œåªæœ‰åˆé€‚çš„æ··éŸ³ã€‚é€‚åº¦çš„ä¸å®Œç¾å¯èƒ½æ›´æœ‰é­…åŠ›ã€‚" },
    { title: "æŒç»­å­¦ä¹ ", content: "æŒç»­å­¦ä¹ æ–°æŠ€æœ¯å’ŒæŠ€å·§ã€‚éŸ³ä¹åˆ¶ä½œæŠ€æœ¯åœ¨ä¸æ–­å‘å±•ï¼Œä¿æŒå­¦ä¹ å¯ä»¥ä¿æŒç«äº‰åŠ›ã€‚" },
    { title: "å®è·µæœ€é‡è¦", content: "ç†è®ºçŸ¥è¯†é‡è¦ï¼Œä½†å®è·µæ›´é‡è¦ã€‚å¤šåˆ¶ä½œã€å¤šæ··éŸ³ï¼Œä»ç»éªŒä¸­å­¦ä¹ ã€‚" },
    { title: "æ‰¾åˆ°é£æ ¼", content: "æ‰¾åˆ°è‡ªå·±çš„é£æ ¼å’Œå£°éŸ³ã€‚ä¸è¦å®Œå…¨æ¨¡ä»¿åˆ«äººï¼Œè¦æœ‰è‡ªå·±çš„ç‰¹è‰²ã€‚" },
    { title: "äº«å—è¿‡ç¨‹", content: "äº«å—åˆ¶ä½œéŸ³ä¹çš„è¿‡ç¨‹ã€‚å¦‚æœè¿‡ç¨‹ä¸æ„‰å¿«ï¼Œç»“æœå¯èƒ½ä¹Ÿä¸ä¼šå¥½ã€‚ä¿æŒçƒ­æƒ…å’Œåˆ›é€ åŠ›ã€‚" }
];

// åˆå§‹åŒ–
let songs = loadSongs();
let currentEditingId = null;
let currentView = 'list'; // 'list' or 'gantt'
let currentTimelineView = 'timeline'; // 'timeline' or 'project'
let currentKnowledgeIndex = 0;

// è®¡æ—¶å™¨ç›¸å…³
let timer = {
    songId: null,
    startTime: null,
    pausedTime: 0,
    isRunning: false,
    isPaused: false,
    interval: null
};

const TIMER_STORAGE_KEY = 'musicplan_timer';

// åŠ è½½æ­Œæ›²æ•°æ®
function loadSongs() {
    const data = localStorage.getItem(STORAGE_KEY);
    return data ? JSON.parse(data) : [];
}

// åŠ è½½è®¡æ—¶å™¨çŠ¶æ€
function loadTimer() {
    const data = localStorage.getItem(TIMER_STORAGE_KEY);
    if (data) {
        const saved = JSON.parse(data);
        if (saved.isRunning) {
            // æ¢å¤è®¡æ—¶å™¨
            const now = Date.now();
            
            if (saved.isPaused) {
                // å¦‚æœä¹‹å‰æ˜¯æš‚åœçŠ¶æ€
                let pauseDuration = 0;
                if (saved.pauseStartTime) {
                    pauseDuration = now - saved.pauseStartTime;
                }
                timer = {
                    songId: saved.songId,
                    startTime: null,
                    pausedTime: (saved.pausedTime || 0) + pauseDuration,
                    isRunning: true,
                    isPaused: true,
                    interval: null
                };
            } else {
                // å¦‚æœä¹‹å‰æ˜¯è¿è¡ŒçŠ¶æ€ï¼Œè®¡ç®—ä»ä¿å­˜çš„å¼€å§‹æ—¶é—´åˆ°ç°åœ¨çš„æ—¶é—´ï¼ŒåŠ åˆ°å·²æš‚åœæ—¶é—´ä¸­
                let elapsed = 0;
                if (saved.startTime) {
                    elapsed = now - saved.startTime;
                }
                timer = {
                    songId: saved.songId,
                    startTime: now, // é‡æ–°å¼€å§‹è®¡æ—¶
                    pausedTime: (saved.pausedTime || 0) + elapsed, // å°†ä¹‹å‰çš„æ—¶é—´åŠ åˆ°å·²æš‚åœæ—¶é—´ä¸­
                    isRunning: true,
                    isPaused: false,
                    interval: null
                };
            }
            
            startTimerDisplay(saved.songId);
        }
    }
}

// ä¿å­˜æ­Œæ›²æ•°æ®
function saveSongs() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(songs));
}

// ä¿å­˜è®¡æ—¶å™¨çŠ¶æ€
function saveTimer() {
    const toSave = {
        songId: timer.songId,
        startTime: timer.startTime,
        pausedTime: timer.pausedTime,
        isRunning: timer.isRunning,
        isPaused: timer.isPaused,
        pauseStartTime: timer.isPaused ? Date.now() : null
    };
    localStorage.setItem(TIMER_STORAGE_KEY, JSON.stringify(toSave));
}

// å¯¼å‡ºæ•°æ®
function exportData() {
    try {
        // æ”¶é›†æ‰€æœ‰éœ€è¦å¤‡ä»½çš„æ•°æ®
        const backupData = {
            version: '1.0',
            exportTime: new Date().toISOString(),
            data: {
                songs: localStorage.getItem(STORAGE_KEY) ? JSON.parse(localStorage.getItem(STORAGE_KEY)) : [],
                timer: localStorage.getItem(TIMER_STORAGE_KEY) ? JSON.parse(localStorage.getItem(TIMER_STORAGE_KEY)) : null,
                milestones: {}
            }
        };

        // æ”¶é›†æ‰€æœ‰é‡Œç¨‹ç¢‘æ ‡è®°
        const milestoneKeys = ['milestone_1', 'milestone_3', 'milestone_5', 'milestone_7', 'milestone_9', 'progress_50'];
        milestoneKeys.forEach(key => {
            const value = localStorage.getItem(key);
            if (value) {
                backupData.data.milestones[key] = value;
            }
        });

        // ä¿å­˜å¼€å§‹æ—¥æœŸ
        const startDate = localStorage.getItem(START_DATE_KEY);
        if (startDate) {
            backupData.data.startDate = startDate;
        }

        // åˆ›å»º JSON å­—ç¬¦ä¸²
        const jsonString = JSON.stringify(backupData, null, 2);

        // åˆ›å»º Blob å¯¹è±¡
        const blob = new Blob([jsonString], { type: 'application/json' });

        // åˆ›å»ºä¸‹è½½é“¾æ¥
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;

        // ç”Ÿæˆæ–‡ä»¶åï¼ˆæ ¼å¼ï¼šmusicplan_backup_YYYYMMDD_HHMMSS.jsonï¼‰
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        const filename = `musicplan_backup_${year}${month}${day}_${hours}${minutes}${seconds}.json`;

        link.download = filename;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        // æ¸…ç† URL å¯¹è±¡
        URL.revokeObjectURL(url);

        // æ˜¾ç¤ºæˆåŠŸæç¤º
        alert('å¤‡ä»½å¯¼å‡ºæˆåŠŸï¼æ–‡ä»¶å·²ä¿å­˜ä¸ºï¼š' + filename);
    } catch (error) {
        console.error('å¯¼å‡ºæ•°æ®å¤±è´¥:', error);
        alert('å¯¼å‡ºæ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚');
    }
}

// å¯¼å…¥æ•°æ®
function importData() {
    // åˆ›å»ºæ–‡ä»¶è¾“å…¥å…ƒç´ 
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.json';
    input.style.display = 'none';

    input.onchange = function(event) {
        const file = event.target.files[0];
        if (!file) {
            return;
        }

        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const backupData = JSON.parse(e.target.result);

                // éªŒè¯æ•°æ®æ ¼å¼
                if (!backupData.data || typeof backupData.data !== 'object') {
                    throw new Error('æ— æ•ˆçš„å¤‡ä»½æ–‡ä»¶æ ¼å¼');
                }

                // ç¡®è®¤å¯¼å…¥
                const confirmMessage = `ç¡®å®šè¦å¯¼å…¥å¤‡ä»½æ•°æ®å—ï¼Ÿ\n\nè¿™å°†è¦†ç›–å½“å‰çš„æ‰€æœ‰æ•°æ®ã€‚\n\nå¯¼å‡ºæ—¶é—´ï¼š${backupData.exportTime || 'æœªçŸ¥'}`;
                if (!confirm(confirmMessage)) {
                    return;
                }

                // æ¢å¤æ­Œæ›²æ•°æ®
                if (backupData.data.songs && Array.isArray(backupData.data.songs)) {
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(backupData.data.songs));
                    songs = backupData.data.songs;
                }

                // æ¢å¤è®¡æ—¶å™¨çŠ¶æ€
                if (backupData.data.timer) {
                    localStorage.setItem(TIMER_STORAGE_KEY, JSON.stringify(backupData.data.timer));
                    // é‡æ–°åŠ è½½è®¡æ—¶å™¨çŠ¶æ€
                    loadTimer();
                } else {
                    localStorage.removeItem(TIMER_STORAGE_KEY);
                }

                // æ¢å¤é‡Œç¨‹ç¢‘æ ‡è®°
                if (backupData.data.milestones && typeof backupData.data.milestones === 'object') {
                    Object.keys(backupData.data.milestones).forEach(key => {
                        localStorage.setItem(key, backupData.data.milestones[key]);
                    });
                }

                // æ¢å¤å¼€å§‹æ—¥æœŸ
                if (backupData.data.startDate) {
                    localStorage.setItem(START_DATE_KEY, backupData.data.startDate);
                }

                // åˆ·æ–°é¡µé¢æ˜¾ç¤º
                renderSongs();
                renderTimeline();
                renderProjectView();
                renderGantt();
                updateStats();

                // æ˜¾ç¤ºæˆåŠŸæç¤º
                alert('æ•°æ®å¯¼å…¥æˆåŠŸï¼');
            } catch (error) {
                console.error('å¯¼å…¥æ•°æ®å¤±è´¥:', error);
                alert('å¯¼å…¥æ•°æ®å¤±è´¥ï¼š' + error.message + '\nè¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ã€‚');
            }
        };

        reader.onerror = function() {
            alert('è¯»å–æ–‡ä»¶å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚');
        };

        reader.readAsText(file);
    };

    // è§¦å‘æ–‡ä»¶é€‰æ‹©
    document.body.appendChild(input);
    input.click();
    document.body.removeChild(input);
}

// ç”Ÿæˆå”¯ä¸€ID
function generateId() {
    return Date.now().toString(36) + Math.random().toString(36).substr(2);
}

// è®¡ç®—æ­Œæ›²è¿›åº¦
function calculateProgress(song) {
    const completedTasks = song.completedTasks || [];
    return (completedTasks.length / TASKS.length) * 100;
}

// è®¡ç®—æ—¶é—´åˆ†é…
function calculateTimeDistribution(estimatedHours) {
    const composition = estimatedHours * 0.7; // ç¼–æ›²ä½œæ›² 70%
    const mixing = estimatedHours * 0.3; // æ··éŸ³æ¯å¸¦ 30%
    const daysAtRecommended = estimatedHours / RECOMMENDED_HOURS_PER_DAY; // æŒ‰æ¯å¤©2å°æ—¶è®¡ç®—æ‰€éœ€å¤©æ•°
    const daysAtMax = estimatedHours / MAX_HOURS_PER_DAY; // æŒ‰æ¯å¤©6å°æ—¶è®¡ç®—æ‰€éœ€å¤©æ•°
    return { composition, mixing, total: estimatedHours, daysAtRecommended, daysAtMax };
}

// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
function updateStats() {
    const completed = songs.filter(s => s.currentStage === 'å·²å®Œæˆ').length;
    const inProgress = songs.filter(s => s.currentStage !== 'å·²å®Œæˆ' && s.currentStage !== 'æ›²é£ç ”ç©¶').length;
    const totalProgress = songs.length > 0 
        ? (songs.reduce((sum, s) => sum + calculateProgress(s), 0) / songs.length).toFixed(1)
        : 0;

    document.getElementById('completedSongs').textContent = completed;
    document.getElementById('inProgressSongs').textContent = inProgress;
    document.getElementById('totalProgress').textContent = totalProgress + '%';
    document.getElementById('remainingDays').textContent = getRemainingDays();
}

// æ¸²æŸ“æ­Œæ›²åˆ—è¡¨
function renderSongs() {
    const container = document.getElementById('songsList');
    container.innerHTML = '';

    if (songs.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">è¿˜æ²¡æœ‰æ·»åŠ æ­Œæ›²ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ ç¬¬ä¸€é¦–æ­Œå§ï¼</p>';
        return;
    }

    songs.forEach(song => {
        const progress = calculateProgress(song);
        const timeDist = calculateTimeDistribution(song.estimatedHours);
        const remainingTime = timeDist.total - (song.timeSpent || 0);

        const card = document.createElement('div');
        card.className = 'song-card';
        card.innerHTML = `
            <div class="song-header">
                <div>
                    <div class="song-title">
                        ${song.name || 'æœªå‘½åæ­Œæ›²'}
                        ${song.isNewGenre ? '<span style="background: #ffc107; color: #333; padding: 2px 6px; border-radius: 4px; font-size: 0.7em; margin-left: 5px;">æ–°æ›²é£</span>' : ''}
                    </div>
                    ${song.genre ? `<div style="font-size: 0.9em; color: #666; margin-top: 4px;">${song.genre}</div>` : ''}
                </div>
                <span class="song-stage stage-${song.currentStage}">${song.currentStage}</span>
            </div>
            <div class="song-progress">
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${progress}%"></div>
                </div>
                <div class="progress-text">
                    <span>ä»»åŠ¡è¿›åº¦: ${song.completedTasks?.length || 0}/${TASKS.length}</span>
                    <span>${progress.toFixed(1)}%</span>
                </div>
            </div>
            <div class="song-info">
                <div class="info-item">
                    <span class="info-label">é¢„è®¡æ—¶é•¿</span>
                    <span class="info-value">${timeDist.total} å°æ—¶</span>
                </div>
                <div class="info-item">
                    <span class="info-label">å·²ç”¨æ—¶é•¿</span>
                    <span class="info-value">${song.timeSpent || 0} å°æ—¶</span>
                </div>
                <div class="info-item">
                    <span class="info-label">å‰©ä½™æ—¶é•¿</span>
                    <span class="info-value">${remainingTime.toFixed(1)} å°æ—¶</span>
                </div>
            </div>
            ${song.isNewGenre ? `
            <div style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 6px; font-size: 0.85em; color: #856404;">
                <strong>æ–°æ›²é£æç¤ºï¼š</strong>éœ€è¦è‡³å°‘ä¸€å‘¨å‰æœŸå‡†å¤‡ï¼ˆå¬10å¼ ä¸“è¾‘ï¼Œæœç´¢æ›²é£ä»‹ç»ï¼šBPMã€é…å™¨éŸ³è‰²ã€ä»£è¡¨äººç‰©ã€ç»å…¸æ›²ç›®ã€æœ€æ–°æ›²ç›®ï¼‰
            </div>
            ` : ''}
            ${timeDist.daysAtRecommended ? `
            <div style="margin-top: 10px; padding: 10px; background: #d1ecf1; border-radius: 6px; font-size: 0.85em; color: #0c5460;">
                <strong>æ—¶é—´é¢„ä¼°ï¼š</strong>æ¯å¤©2å°æ—¶éœ€${timeDist.daysAtRecommended.toFixed(0)}å¤©ï¼Œæ¯å¤©6å°æ—¶éœ€${timeDist.daysAtMax.toFixed(0)}å¤©
            </div>
            ` : ''}
            <div class="timer-section" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e0e0e0;">
                ${timer.songId === song.id && timer.isRunning 
                    ? `<div class="timer-active">
                        <span style="color: #667eea; font-weight: 600;">â±ï¸ æ­£åœ¨è®¡æ—¶ä¸­...</span>
                        <button class="btn btn-small" onclick="stopTimer()" style="margin-left: 10px;">åœæ­¢</button>
                       </div>`
                    : `<button class="btn btn-small ${timer.songId === song.id ? 'btn-secondary' : 'btn-primary'}" onclick="startTimer('${song.id}')">
                        ${timer.songId === song.id ? 'ç»§ç»­è®¡æ—¶' : 'å¼€å§‹è®¡æ—¶'}
                       </button>`
                }
            </div>
            <div class="song-actions">
                <button class="btn btn-small btn-edit" onclick="editSong('${song.id}')">ç¼–è¾‘</button>
                <button class="btn btn-small btn-delete" onclick="deleteSong('${song.id}')">åˆ é™¤</button>
            </div>
        `;
        container.appendChild(card);
    });
}

// æ¸²æŸ“æ—¶é—´çº¿
function renderTimeline() {
    const container = document.getElementById('timeline');
    container.innerHTML = '';

    if (songs.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">æ·»åŠ æ­Œæ›²åï¼Œæ—¶é—´çº¿è§„åˆ’å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</p>';
        return;
    }

    // è®¡ç®—æ¯é¦–æ­Œçš„å¹³å‡æ—¶é—´
    const avgHoursPerSong = songs.length > 0
        ? songs.reduce((sum, s) => sum + s.estimatedHours, 0) / songs.length
        : HOURS_PER_SONG;

    // è®¡ç®—æ€»å·¥ä½œé‡å’Œæ—¶é—´å®‰æ’
    const totalHours = TARGET_SONGS * avgHoursPerSong;
    const daysAtRecommended = totalHours / RECOMMENDED_HOURS_PER_DAY;
    const daysAtMax = totalHours / MAX_HOURS_PER_DAY;
    
    const remainingDays = getRemainingDays();
    const startDate = getStartDate();
    const endDate = new Date(startDate);
    endDate.setDate(startDate.getDate() + TOTAL_DAYS);
    
    // æ ¼å¼åŒ–æ—¥æœŸæ˜¾ç¤º
    const formatDate = (date) => {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    };
    
    const timelineItem = document.createElement('div');
    timelineItem.className = 'timeline-item';
    timelineItem.innerHTML = `
        <h3>ğŸ“… æ—¶é—´è§„åˆ’</h3>
        <p><strong>å¼€å§‹æ—¥æœŸï¼š</strong>${formatDate(startDate)}</p>
        <p><strong>ç»“æŸæ—¥æœŸï¼š</strong>${formatDate(endDate)}</p>
        <p><strong>ç›®æ ‡ï¼š</strong>${remainingDays} å¤©å†…å®Œæˆ ${TARGET_SONGS} é¦–æ­Œï¼ˆå…± ${TOTAL_DAYS} å¤©ï¼‰</p>
        <p><strong>æ¯é¦–æ­Œï¼š</strong>${avgHoursPerSong.toFixed(0)} æœ‰æ•ˆå°æ—¶</p>
        <p><strong>æ€»å·¥ä½œé‡ï¼š</strong>${totalHours.toFixed(0)} æœ‰æ•ˆå°æ—¶</p>
        <p style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e0e0e0;">
            <strong>æ—¶é—´å®‰æ’ï¼š</strong><br>
            â€¢ æ¯å¤© ${RECOMMENDED_HOURS_PER_DAY} å°æ—¶ï¼ˆå·²å…»æˆä¹ æƒ¯ï¼‰ï¼š${daysAtRecommended.toFixed(0)} å¤©å®Œæˆï¼Œçº¦ ${(daysAtRecommended / avgHoursPerSong).toFixed(1)} é¦–æ­Œ/å‘¨<br>
            â€¢ æ¯å¤© ${MAX_HOURS_PER_DAY} å°æ—¶ï¼ˆæœ€å¤§å¼ºåº¦ï¼‰ï¼š${daysAtMax.toFixed(0)} å¤©å®Œæˆï¼Œçº¦ ${(daysAtMax / avgHoursPerSong).toFixed(1)} é¦–æ­Œ/å‘¨<br>
            <span style="color: #28a745; font-weight: 600;">âœ“ ç»´æŒæ¯å¤©2å°æ—¶çš„ä¹ æƒ¯ï¼Œ${TOTAL_DAYS}å¤©å¯ä»¥å®Œæˆ9é¦–æ­Œï¼Œä¸€å®šèƒ½æ‹¿å›å…¨éƒ¨æŠ¼é‡‘ï¼</span>
        </p>
        <p style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e0e0e0;">
            <strong>æ—¶é—´åˆ†é…å»ºè®®ï¼š</strong><br>
            â€¢ ç¼–æ›²ä½œæ›²ï¼š${(RECOMMENDED_HOURS_PER_DAY * 0.7).toFixed(1)} å°æ—¶/å¤© (70%)<br>
            â€¢ æ··éŸ³æ¯å¸¦ï¼š${(RECOMMENDED_HOURS_PER_DAY * 0.3).toFixed(1)} å°æ—¶/å¤© (30%)
        </p>
    `;
    container.appendChild(timelineItem);

    // æ˜¾ç¤ºæ¯é¦–æ­Œçš„é¢„è®¡å®Œæˆæ—¶é—´
    const hoursPerDay = RECOMMENDED_HOURS_PER_DAY; // ä½¿ç”¨æ¨èçš„å·¥ä½œæ—¶é—´
    songs.forEach((song, index) => {
        const item = document.createElement('div');
        item.className = 'timeline-item';
        const progress = calculateProgress(song);
        const remainingTime = song.estimatedHours - (song.timeSpent || 0);
        const estimatedDays = remainingTime / hoursPerDay;

        item.innerHTML = `
            <h3>${song.name || `æ­Œæ›² ${index + 1}`}</h3>
            <p><strong>é˜¶æ®µï¼š</strong>${song.currentStage}</p>
            <p><strong>è¿›åº¦ï¼š</strong>${progress.toFixed(1)}%</p>
            <p><strong>é¢„è®¡è¿˜éœ€ï¼š</strong>${estimatedDays.toFixed(1)} å¤©å®Œæˆ</p>
        `;
        container.appendChild(item);
    });
}

// æ‰“å¼€æ·»åŠ æ­Œæ›²æ¨¡æ€æ¡†
function openAddModal() {
    currentEditingId = null;
    const modal = document.getElementById('songModal');
    if (!modal) {
        console.error('Modal not found');
        return;
    }
    
    document.getElementById('modalTitle').textContent = 'æ·»åŠ æ–°æ­Œ';
    const form = document.getElementById('songForm');
    if (form) {
        form.reset();
    }
    const songIdInput = document.getElementById('songId');
    if (songIdInput) {
        songIdInput.value = '';
    }
    
    // é‡ç½®ä»»åŠ¡å¤é€‰æ¡†
    TASKS.forEach((_, index) => {
        const checkbox = document.getElementById(`task${index + 1}`);
        if (checkbox) {
            checkbox.checked = false;
        }
    });
    
    // é‡ç½®æ–°æ›²é£å¤é€‰æ¡†
    const isNewGenreCheckbox = document.getElementById('isNewGenre');
    if (isNewGenreCheckbox) {
        isNewGenreCheckbox.checked = false;
    }
    
    // é‡ç½®é¢„è®¡æ—¶é•¿
    const estimatedHoursInput = document.getElementById('estimatedHours');
    if (estimatedHoursInput) {
        estimatedHoursInput.value = HOURS_PER_SONG;
    }
    
    modal.style.display = 'flex';
}

// ç¼–è¾‘æ­Œæ›²
function editSong(id) {
    const song = songs.find(s => s.id === id);
    if (!song) return;

    currentEditingId = id;
    document.getElementById('modalTitle').textContent = 'ç¼–è¾‘æ­Œæ›²';
    document.getElementById('songId').value = song.id;
    document.getElementById('songName').value = song.name || '';
    document.getElementById('songGenre').value = song.genre || '';
    document.getElementById('estimatedHours').value = song.estimatedHours || HOURS_PER_SONG;
    document.getElementById('currentStage').value = song.currentStage || 'æ›²é£ç ”ç©¶';
    document.getElementById('timeSpent').value = song.timeSpent || 0;
    document.getElementById('notes').value = song.notes || '';
    document.getElementById('isNewGenre').checked = song.isNewGenre || false;

    // è®¾ç½®ä»»åŠ¡å¤é€‰æ¡†
    TASKS.forEach((_, index) => {
        const checkbox = document.getElementById(`task${index + 1}`);
        if (checkbox) {
            checkbox.checked = song.completedTasks?.includes(index) || false;
        }
    });

    const modal = document.getElementById('songModal');
    if (modal) {
        modal.style.display = 'flex';
    }
}

// åˆ é™¤æ­Œæ›²
function deleteSong(id) {
    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™é¦–æ­Œå—ï¼Ÿ')) {
        songs = songs.filter(s => s.id !== id);
        saveSongs();
        renderSongs();
        renderTimeline();
        renderProjectView();
        renderGantt();
        updateStats();
    }
}

// ä¿å­˜æ­Œæ›²
function saveSong(event) {
    event.preventDefault();

    const id = document.getElementById('songId').value || generateId();
    const name = document.getElementById('songName').value;
    const genre = document.getElementById('songGenre').value;
    const estimatedHours = parseFloat(document.getElementById('estimatedHours').value) || HOURS_PER_SONG;
    const currentStage = document.getElementById('currentStage').value;
    const timeSpent = parseFloat(document.getElementById('timeSpent').value) || 0;
    const notes = document.getElementById('notes').value;
    const isNewGenre = document.getElementById('isNewGenre').checked;

    // æ”¶é›†å·²å®Œæˆçš„ä»»åŠ¡
    const completedTasks = [];
    TASKS.forEach((_, index) => {
        if (document.getElementById(`task${index + 1}`).checked) {
            completedTasks.push(index);
        }
    });

    const songData = {
        id,
        name,
        genre,
        estimatedHours,
        currentStage,
        timeSpent,
        notes,
        completedTasks,
        isNewGenre,
        updatedAt: new Date().toISOString()
    };

    if (currentEditingId) {
        // æ›´æ–°ç°æœ‰æ­Œæ›²
        const index = songs.findIndex(s => s.id === currentEditingId);
        if (index !== -1) {
            songs[index] = { ...songs[index], ...songData };
        }
    } else {
        // æ·»åŠ æ–°æ­Œæ›²
        songData.createdAt = new Date().toISOString();
        songs.push(songData);
    }

    saveSongs();
    renderSongs();
    renderTimeline();
    renderProjectView();
    renderGantt();
    updateStats();
    checkAndShowEncouragement();
    closeModal();
}

// å…³é—­æ¨¡æ€æ¡†
function closeModal() {
    document.getElementById('songModal').style.display = 'none';
    currentEditingId = null;
}

// äº‹ä»¶ç›‘å¬
document.addEventListener('DOMContentLoaded', () => {
    // æ·»åŠ æ­Œæ›²æŒ‰é’®
    const addSongBtn = document.getElementById('addSongBtn');
    if (addSongBtn) {
        addSongBtn.addEventListener('click', openAddModal);
    } else {
        console.error('Add song button not found');
    }

    // è¡¨å•æäº¤
    document.getElementById('songForm').addEventListener('submit', saveSong);

    // å–æ¶ˆæŒ‰é’®
    document.getElementById('cancelBtn').addEventListener('click', closeModal);

    // å…³é—­æŒ‰é’®
    document.querySelector('.close').addEventListener('click', closeModal);

    // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
    window.addEventListener('click', (event) => {
        const songModal = document.getElementById('songModal');
        if (event.target === songModal) {
            closeModal();
        }
        const startDateModal = document.getElementById('startDateModal');
        if (event.target === startDateModal) {
            closeStartDateModal();
        }
    });

    // åŠ è½½è®¡æ—¶å™¨çŠ¶æ€
    loadTimer();

    // åˆå§‹æ¸²æŸ“
    renderSongs();
    renderTimeline();
    renderProjectView();
    renderGantt();
    updateStats();
    initKnowledge();

    // é¡µé¢å¯è§æ€§å˜åŒ–æ—¶æ›´æ–°è®¡æ—¶å™¨
    document.addEventListener('visibilitychange', () => {
        if (!document.hidden && timer.isRunning) {
            updateTimerDisplay();
        }
    });
});

// è®¡æ—¶å™¨åŠŸèƒ½
function startTimer(songId) {
    // å¦‚æœå·²æœ‰è®¡æ—¶å™¨åœ¨è¿è¡Œï¼Œå…ˆåœæ­¢å®ƒ
    if (timer.isRunning && timer.songId !== songId) {
        stopTimer();
    }

    const song = songs.find(s => s.id === songId);
    if (!song) return;

    if (timer.songId === songId && timer.isPaused) {
        // æ¢å¤æš‚åœçš„è®¡æ—¶å™¨
        resumeTimer();
        return;
    }

    // å¼€å§‹æ–°çš„è®¡æ—¶å™¨
    timer.songId = songId;
    timer.startTime = Date.now();
    timer.pausedTime = 0;
    timer.isRunning = true;
    timer.isPaused = false;

    startTimerDisplay(songId);
    saveTimer();
    renderSongs();
    renderGantt();
}

function startTimerDisplay(songId) {
    const song = songs.find(s => s.id === songId);
    if (!song) return;

    document.getElementById('timerSongName').textContent = song.name || 'æœªå‘½åæ­Œæ›²';
    document.getElementById('timerFloating').style.display = 'block';

    // æ¸…é™¤ä¹‹å‰çš„interval
    if (timer.interval) {
        clearInterval(timer.interval);
    }

    // æ›´æ–°æŒ‰é’®çŠ¶æ€
    if (timer.isPaused) {
        document.getElementById('timerPauseBtn').style.display = 'none';
        document.getElementById('timerResumeBtn').style.display = 'inline-block';
    } else {
        document.getElementById('timerPauseBtn').style.display = 'inline-block';
        document.getElementById('timerResumeBtn').style.display = 'none';
    }

    // æ›´æ–°æ˜¾ç¤º
    updateTimerDisplay();

    // æ¯ç§’æ›´æ–°ä¸€æ¬¡
    timer.interval = setInterval(() => {
        if (!timer.isPaused) {
            updateTimerDisplay();
        }
    }, 1000);
}

function updateTimerDisplay() {
    if (!timer.isRunning) return;

    const now = Date.now();
    let elapsed = 0;

    if (timer.isPaused) {
        elapsed = timer.pausedTime;
    } else {
        // å¦‚æœæ­£åœ¨è¿è¡Œï¼Œè®¡ç®—ä»å½“å‰å¼€å§‹æ—¶é—´åˆ°ç°åœ¨çš„æ—¶é—´ï¼ŒåŠ ä¸Šä¹‹å‰å·²æš‚åœçš„æ—¶é—´
        if (timer.startTime) {
            elapsed = (now - timer.startTime) + timer.pausedTime;
        } else {
            elapsed = timer.pausedTime;
        }
    }

    const hours = Math.floor(elapsed / 3600000);
    const minutes = Math.floor((elapsed % 3600000) / 60000);
    const seconds = Math.floor((elapsed % 60000) / 1000);

    const timeString = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    document.getElementById('timerDisplay').textContent = timeString;
}

function pauseTimer() {
    if (!timer.isRunning || timer.isPaused) return;

    const now = Date.now();
    if (timer.startTime) {
        timer.pausedTime += now - timer.startTime;
    }
    timer.isPaused = true;
    timer.startTime = null;

    document.getElementById('timerPauseBtn').style.display = 'none';
    document.getElementById('timerResumeBtn').style.display = 'inline-block';

    saveTimer();
    renderSongs();
}

function resumeTimer() {
    if (!timer.isRunning || !timer.isPaused) return;

    timer.isPaused = false;
    timer.startTime = Date.now();

    document.getElementById('timerPauseBtn').style.display = 'inline-block';
    document.getElementById('timerResumeBtn').style.display = 'none';

    saveTimer();
    renderSongs();
}

function stopTimer() {
    if (!timer.isRunning) return;

    // è®¡ç®—æ€»æ—¶é•¿ï¼ˆå°æ—¶ï¼‰
    let totalElapsed = timer.pausedTime;
    if (!timer.isPaused && timer.startTime) {
        totalElapsed += Date.now() - timer.startTime;
    }
    const hours = totalElapsed / 3600000;

    // æ›´æ–°æ­Œæ›²çš„å·²ç”¨æ—¶é•¿
    const song = songs.find(s => s.id === timer.songId);
    if (song) {
        song.timeSpent = (song.timeSpent || 0) + hours;
        saveSongs();
    }

    // æ¸…é™¤è®¡æ—¶å™¨
    if (timer.interval) {
        clearInterval(timer.interval);
    }

    timer = {
        songId: null,
        startTime: null,
        pausedTime: 0,
        isRunning: false,
        isPaused: false,
        interval: null
    };

    localStorage.removeItem(TIMER_STORAGE_KEY);
    document.getElementById('timerFloating').style.display = 'none';
    renderSongs();
    renderTimeline();
    renderProjectView();
    renderGantt();
    updateStats();
    checkAndShowEncouragement();
}

// ç”˜ç‰¹å›¾è§†å›¾åˆ‡æ¢ï¼ˆç°åœ¨ç”˜ç‰¹å›¾æ˜¯ç‹¬ç«‹åŒºåŸŸï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥ç®€åŒ–æˆ–ç§»é™¤ï¼‰
function switchGanttView(view) {
    // ç”˜ç‰¹å›¾ç°åœ¨æ˜¯ç‹¬ç«‹åŒºåŸŸï¼Œå§‹ç»ˆæ˜¾ç¤º
    renderGantt();
}

// æ¸²æŸ“ç”˜ç‰¹å›¾ï¼ˆæŒ‰æ—¥å±•ç¤ºï¼‰
function renderGantt() {
    const container = document.getElementById('ganttChart');
    container.innerHTML = '';

    if (songs.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">è¿˜æ²¡æœ‰æ·»åŠ æ­Œæ›²ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ ç¬¬ä¸€é¦–æ­Œå§ï¼</p>';
        return;
    }

    // è®¡ç®—æ—¥æœŸèŒƒå›´ï¼ˆä»å¼€å§‹æ—¥æœŸåˆ°ç»“æŸæ—¥æœŸï¼‰
    const startDate = getStartDate();
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const endDate = new Date(startDate);
    endDate.setDate(startDate.getDate() + TOTAL_DAYS);
    const remainingDays = getRemainingDays();

    // è®¡ç®—æ¯é¦–æ­Œçš„å¹³å‡æ—¶é—´
    const avgHoursPerSong = songs.length > 0
        ? songs.reduce((sum, s) => sum + s.estimatedHours, 0) / songs.length
        : HOURS_PER_SONG;
    // ä½¿ç”¨æ¨èçš„å·¥ä½œæ—¶é—´ï¼ˆæ¯å¤©2å°æ—¶ï¼‰æ¥è®¡ç®—
    const hoursPerDay = RECOMMENDED_HOURS_PER_DAY;

    // åˆ›å»ºç”˜ç‰¹å›¾å®¹å™¨
    const ganttWrapper = document.createElement('div');
    ganttWrapper.className = 'gantt-wrapper';

    // åˆ›å»ºæ—¶é—´è½´ï¼ˆæŒ‰å‘¨æ˜¾ç¤ºï¼Œæ¯å‘¨æ˜¾ç¤ºæ—¥æœŸï¼‰
    const timeline = document.createElement('div');
    timeline.className = 'gantt-timeline';
    
    // ç”Ÿæˆæ‰€æœ‰æ—¥æœŸï¼ˆä»å¼€å§‹æ—¥æœŸåˆ°ç»“æŸæ—¥æœŸï¼‰
    const dates = [];
    const currentDate = new Date(startDate);
    while (currentDate <= endDate) {
        dates.push(new Date(currentDate));
        currentDate.setDate(currentDate.getDate() + 1);
    }

    // åˆ›å»ºæ—¥æœŸè¡¨å¤´ï¼ˆæ¯7å¤©æ˜¾ç¤ºä¸€æ¬¡ï¼Œæˆ–æ¯å‘¨çš„ç¬¬ä¸€å¤©ï¼‰
    const timelineHeader = document.createElement('div');
    timelineHeader.className = 'gantt-timeline-header';
    
    // æŒ‰å‘¨åˆ†ç»„æ˜¾ç¤º
    const weeks = [];
    for (let i = 0; i < dates.length; i += 7) {
        weeks.push(dates.slice(i, i + 7));
    }

    weeks.forEach((week, weekIndex) => {
        const weekDiv = document.createElement('div');
        weekDiv.className = 'gantt-week';
        const firstDay = week[0];
        const lastDay = week[week.length - 1];
        weekDiv.innerHTML = `
            <div class="gantt-week-label">${firstDay.getMonth() + 1}/${firstDay.getDate()}</div>
            <div class="gantt-week-days">
                ${week.map(day => {
                    const isToday = day.getTime() === today.getTime();
                    const isStartDate = day.getTime() === startDate.getTime();
                    return `<div class="gantt-day ${isToday ? 'today' : ''} ${isStartDate ? 'start-date' : ''}">${day.getDate()}</div>`;
                }).join('')}
            </div>
        `;
        timelineHeader.appendChild(weekDiv);
    });
    timeline.appendChild(timelineHeader);

    // æ·»åŠ æ­Œæ›²è¡Œ
    songs.forEach((song, index) => {
        const progress = calculateProgress(song);
        const remainingTime = song.estimatedHours - (song.timeSpent || 0);
        const estimatedDays = Math.max(1, remainingTime / hoursPerDay);
        
        // è®¡ç®—å¼€å§‹å’Œç»“æŸæ—¥æœŸ
        const startOffset = index * (TOTAL_DAYS / TARGET_SONGS);
        const songStartDate = new Date(startDate);
        songStartDate.setDate(startDate.getDate() + Math.floor(startOffset));
        
        const endDateForSong = new Date(songStartDate);
        endDateForSong.setDate(songStartDate.getDate() + Math.ceil(estimatedDays));

        const row = document.createElement('div');
        row.className = 'gantt-row';
        
        const songLabel = document.createElement('div');
        songLabel.className = 'gantt-song-label';
        const newGenreBadge = song.isNewGenre ? '<span style="background: #ffc107; color: #333; padding: 2px 6px; border-radius: 4px; font-size: 0.7em; margin-left: 5px;">æ–°æ›²é£</span>' : '';
        songLabel.innerHTML = `
            <div class="gantt-song-name">${song.name || `æ­Œæ›² ${index + 1}`}${newGenreBadge}</div>
            <div class="gantt-song-info">${progress.toFixed(0)}% | ${(song.timeSpent || 0).toFixed(1)}h / ${song.estimatedHours}h</div>
            <div class="gantt-song-stage">${song.currentStage}</div>
        `;
        row.appendChild(songLabel);

        const songBar = document.createElement('div');
        songBar.className = 'gantt-song-bar-container';
        
        // è®¡ç®—è¿›åº¦æ¡ä½ç½®å’Œå®½åº¦ï¼ˆæŒ‰å¤©æ•°ï¼‰
        const daysFromStart = Math.floor((songStartDate - startDate) / (1000 * 60 * 60 * 24));
        const dayWidth = 100 / dates.length;
        const startPercent = daysFromStart * dayWidth;
        const widthPercent = estimatedDays * dayWidth;
        const progressPercent = (song.timeSpent || 0) / song.estimatedHours * 100;

        const bar = document.createElement('div');
        bar.className = 'gantt-song-bar';
        bar.style.left = `${Math.max(0, startPercent)}%`;
        bar.style.width = `${Math.min(widthPercent, 100 - startPercent)}%`;
        
        const progressBar = document.createElement('div');
        progressBar.className = 'gantt-song-progress';
        progressBar.style.width = `${Math.min(progressPercent, 100)}%`;
        progressBar.style.backgroundColor = song.currentStage === 'å·²å®Œæˆ' ? '#28a745' : '#667eea';
        
        bar.appendChild(progressBar);
        songBar.appendChild(bar);
        row.appendChild(songBar);

        timeline.appendChild(row);
    });

    ganttWrapper.appendChild(timeline);
    container.appendChild(ganttWrapper);
}

// æ¸²æŸ“é¡¹ç›®è¿›åº¦è§†å›¾
function renderProjectView() {
    const container = document.getElementById('projectView');
    container.innerHTML = '';

    if (songs.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">è¿˜æ²¡æœ‰æ·»åŠ æ­Œæ›²</p>';
        return;
    }

    // è®¡ç®—é¡¹ç›®æ•´ä½“è¿›åº¦
    const totalProgress = songs.reduce((sum, s) => sum + calculateProgress(s), 0) / songs.length;
    const completedSongs = songs.filter(s => s.currentStage === 'å·²å®Œæˆ').length;
    const inProgressSongs = songs.filter(s => s.currentStage !== 'å·²å®Œæˆ' && s.currentStage !== 'æ›²é£ç ”ç©¶').length;
    
    // è®¡ç®—æ—¶é—´è¿›åº¦
    const totalEstimatedHours = songs.reduce((sum, s) => sum + s.estimatedHours, 0);
    const totalSpentHours = songs.reduce((sum, s) => sum + (s.timeSpent || 0), 0);
    const timeProgress = (totalSpentHours / totalEstimatedHours) * 100;

    // è®¡ç®—é‡Œç¨‹ç¢‘
    const milestones = [
        { name: 'ç¬¬ä¸€é¦–æ­Œå®Œæˆ', progress: 11.1, achieved: completedSongs >= 1 },
        { name: '25%å®Œæˆ', progress: 25, achieved: completedSongs >= 3 },
        { name: 'ä¸€åŠå®Œæˆ', progress: 50, achieved: completedSongs >= 5 },
        { name: '75%å®Œæˆ', progress: 75, achieved: completedSongs >= 7 },
        { name: 'å…¨éƒ¨å®Œæˆ', progress: 100, achieved: completedSongs >= 9 }
    ];

    const projectView = document.createElement('div');
    projectView.className = 'project-view-content';
    
    // æ•´ä½“è¿›åº¦å¡ç‰‡
    const overviewCard = document.createElement('div');
    overviewCard.className = 'project-card';
    overviewCard.innerHTML = `
        <h3>ğŸ“Š é¡¹ç›®æ¦‚è§ˆ</h3>
        <div class="project-stats-grid">
            <div class="project-stat">
                <div class="project-stat-label">æ•´ä½“è¿›åº¦</div>
                <div class="project-stat-value">${totalProgress.toFixed(1)}%</div>
                <div class="project-progress-bar">
                    <div class="project-progress-fill" style="width: ${totalProgress}%"></div>
                </div>
            </div>
            <div class="project-stat">
                <div class="project-stat-label">å·²å®Œæˆæ­Œæ›²</div>
                <div class="project-stat-value">${completedSongs} / ${TARGET_SONGS}</div>
            </div>
            <div class="project-stat">
                <div class="project-stat-label">è¿›è¡Œä¸­</div>
                <div class="project-stat-value">${inProgressSongs} é¦–</div>
            </div>
            <div class="project-stat">
                <div class="project-stat-label">æ—¶é—´è¿›åº¦</div>
                <div class="project-stat-value">${timeProgress.toFixed(1)}%</div>
                <div class="project-stat-sublabel">${totalSpentHours.toFixed(1)}h / ${totalEstimatedHours.toFixed(1)}h</div>
            </div>
        </div>
    `;
    projectView.appendChild(overviewCard);

    // é‡Œç¨‹ç¢‘å¡ç‰‡
    const milestoneCard = document.createElement('div');
    milestoneCard.className = 'project-card';
    milestoneCard.innerHTML = `
        <h3>ğŸ¯ é‡Œç¨‹ç¢‘</h3>
        <div class="milestones">
            ${milestones.map(m => `
                <div class="milestone ${m.achieved ? 'achieved' : ''}">
                    <div class="milestone-icon">${m.achieved ? 'âœ…' : 'â³'}</div>
                    <div class="milestone-info">
                        <div class="milestone-name">${m.name}</div>
                        <div class="milestone-progress">${m.progress}%</div>
                    </div>
                </div>
            `).join('')}
        </div>
    `;
    projectView.appendChild(milestoneCard);

    // æ­Œæ›²çŠ¶æ€å¡ç‰‡
    const songsCard = document.createElement('div');
    songsCard.className = 'project-card';
    songsCard.innerHTML = `
        <h3>ğŸµ æ­Œæ›²çŠ¶æ€åˆ†å¸ƒ</h3>
        <div class="stage-distribution">
            ${STAGES.map(stage => {
                const count = songs.filter(s => s.currentStage === stage).length;
                const percent = (count / songs.length) * 100;
                return `
                    <div class="stage-item">
                        <div class="stage-name">${stage}</div>
                        <div class="stage-bar">
                            <div class="stage-bar-fill" style="width: ${percent}%"></div>
                        </div>
                        <div class="stage-count">${count} é¦–</div>
                    </div>
                `;
            }).join('')}
        </div>
    `;
    projectView.appendChild(songsCard);

    container.appendChild(projectView);
}

// æ—¶é—´çº¿è§†å›¾åˆ‡æ¢
function switchTimelineView(view) {
    currentTimelineView = view;
    
    if (view === 'timeline') {
        document.getElementById('timeline').style.display = 'block';
        document.getElementById('projectView').style.display = 'none';
        document.getElementById('timelineViewBtn').classList.add('active');
        document.getElementById('projectViewBtn').classList.remove('active');
    } else {
        document.getElementById('timeline').style.display = 'none';
        document.getElementById('projectView').style.display = 'block';
        document.getElementById('timelineViewBtn').classList.remove('active');
        document.getElementById('projectViewBtn').classList.add('active');
        renderProjectView();
    }
}

// æ˜¾ç¤ºé¼“åŠ±ä¿¡æ¯
function showEncouragement(type, message) {
    const modal = document.getElementById('encouragementModal');
    const icon = document.getElementById('encouragementIcon');
    const title = document.getElementById('encouragementTitle');
    const msg = document.getElementById('encouragementMessage');

    const encouragements = {
        taskComplete: {
            icon: 'ğŸ‰',
            title: 'ä»»åŠ¡å®Œæˆï¼',
            message: message || 'ä½ å®Œæˆäº†ä¸€ä¸ªä»»åŠ¡ï¼Œç»§ç»­åŠ æ²¹ï¼'
        },
        songComplete: {
            icon: 'ğŸ†',
            title: 'æ­Œæ›²å®Œæˆï¼',
            message: message || 'æ­å–œä½ å®Œæˆäº†ä¸€é¦–æ­Œï¼è¿™æ˜¯å·¨å¤§çš„è¿›æ­¥ï¼'
        },
        milestone: {
            icon: 'â­',
            title: 'é‡Œç¨‹ç¢‘è¾¾æˆï¼',
            message: message || 'ä½ è¾¾åˆ°äº†ä¸€ä¸ªé‡è¦çš„é‡Œç¨‹ç¢‘ï¼'
        },
        progress: {
            icon: 'ğŸ’ª',
            title: 'è¿›åº¦ä¸é”™ï¼',
            message: message || 'ä½ çš„è¿›åº¦å¾ˆå¥½ï¼Œç»§ç»­ä¿æŒï¼'
        }
    };

    const enc = encouragements[type] || encouragements.progress;
    icon.textContent = enc.icon;
    title.textContent = enc.title;
    msg.textContent = enc.message;
    modal.style.display = 'flex';
}

// å…³é—­é¼“åŠ±æç¤º
function closeEncouragement() {
    document.getElementById('encouragementModal').style.display = 'none';
}

// æ£€æŸ¥å¹¶æ˜¾ç¤ºé¼“åŠ±
function checkAndShowEncouragement() {
    const completedSongs = songs.filter(s => s.currentStage === 'å·²å®Œæˆ').length;
    const totalProgress = songs.reduce((sum, s) => sum + calculateProgress(s), 0) / songs.length;

    // æ£€æŸ¥é‡Œç¨‹ç¢‘
    if (completedSongs === 1 && !localStorage.getItem('milestone_1')) {
        showEncouragement('milestone', 'æ­å–œå®Œæˆç¬¬ä¸€é¦–æ­Œï¼è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„å¼€å§‹ï¼');
        localStorage.setItem('milestone_1', 'true');
    } else if (completedSongs === 3 && !localStorage.getItem('milestone_3')) {
        showEncouragement('milestone', 'å¤ªæ£’äº†ï¼ä½ å·²ç»å®Œæˆäº†25%çš„æ­Œæ›²ï¼');
        localStorage.setItem('milestone_3', 'true');
    } else if (completedSongs === 5 && !localStorage.getItem('milestone_5')) {
        showEncouragement('milestone', 'äº†ä¸èµ·ï¼ä½ å·²ç»å®Œæˆäº†ä¸€åŠï¼ç»§ç»­åšæŒï¼');
        localStorage.setItem('milestone_5', 'true');
    } else if (completedSongs === 7 && !localStorage.getItem('milestone_7')) {
        showEncouragement('milestone', 'æ¥è¿‘ç»ˆç‚¹äº†ï¼ä½ å·²ç»å®Œæˆäº†75%ï¼');
        localStorage.setItem('milestone_7', 'true');
    } else if (completedSongs === 9 && !localStorage.getItem('milestone_9')) {
        showEncouragement('songComplete', 'ğŸŠ æ­å–œï¼ä½ å®Œæˆäº†æ‰€æœ‰9é¦–æ­Œï¼è¿™æ˜¯ä¸€ä¸ªäº†ä¸èµ·çš„æˆå°±ï¼');
        localStorage.setItem('milestone_9', 'true');
    }

    // æ£€æŸ¥æ•´ä½“è¿›åº¦
    if (totalProgress >= 50 && !localStorage.getItem('progress_50')) {
        showEncouragement('progress', 'ä½ çš„æ•´ä½“è¿›åº¦å·²ç»è¶…è¿‡50%ï¼ç»§ç»­ä¿æŒè¿™ä¸ªèŠ‚å¥ï¼');
        localStorage.setItem('progress_50', 'true');
    }
}

// æ˜¾ç¤ºä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹
function showNextKnowledge() {
    currentKnowledgeIndex = (currentKnowledgeIndex + 1) % KNOWLEDGE_BASE.length;
    const knowledge = KNOWLEDGE_BASE[currentKnowledgeIndex];
    document.getElementById('knowledgeContent').innerHTML = `
        <div class="knowledge-title">${knowledge.title}</div>
        <div class="knowledge-text">${knowledge.content}</div>
    `;
}

// åˆå§‹åŒ–çŸ¥è¯†ç‚¹
function initKnowledge() {
    // éšæœºé€‰æ‹©ä¸€ä¸ªçŸ¥è¯†ç‚¹
    currentKnowledgeIndex = Math.floor(Math.random() * KNOWLEDGE_BASE.length);
    showNextKnowledge();
}

// ==================== éŸ³ä¹ç†è®ºåŠŸèƒ½ ====================

// Tab åˆ‡æ¢
function switchTab(tabName) {
    // éšè—æ‰€æœ‰ tab å†…å®¹
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // ç§»é™¤æ‰€æœ‰ tab æŒ‰é’®çš„ active çŠ¶æ€
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // æ˜¾ç¤ºé€‰ä¸­çš„ tab
    const targetTab = document.getElementById(tabName + 'Tab');
    if (targetTab) {
        targetTab.classList.add('active');
    }
    
    // æ¿€æ´»å¯¹åº”çš„æŒ‰é’®
    const targetBtn = Array.from(document.querySelectorAll('.tab-btn')).find(btn => 
        btn.textContent.includes(tabName === 'schedule' ? 'æ—¥ç¨‹è§„åˆ’' : 'éŸ³ä¹ç†è®º')
    );
    if (targetBtn) {
        targetBtn.classList.add('active');
    }
    
    // å¦‚æœåˆ‡æ¢åˆ°éŸ³ä¹ç†è®º tabï¼Œåˆå§‹åŒ–ç›¸å…³åŠŸèƒ½
    if (tabName === 'theory') {
        if (!window.circleOfFifthsInitialized) {
            initCircleOfFifths();
            window.circleOfFifthsInitialized = true;
        }
        if (!window.chordProgressionsInitialized) {
            updateChordProgressions();
            window.chordProgressionsInitialized = true;
        }
        if (!window.chordTypesInitialized) {
            renderChordTypes();
            window.chordTypesInitialized = true;
        }
        if (!window.chordDegreesInitialized) {
            updateChordDegrees();
            window.chordDegreesInitialized = true;
        }
        if (!window.chordExamplesInitialized) {
            renderChordExamples();
            window.chordExamplesInitialized = true;
        }
        if (!window.modalScalesInitialized) {
            renderModalScales();
            window.modalScalesInitialized = true;
        }
    }
}

// å’Œå¼¦çŸ¥è¯†é€ŸæŸ¥ tab åˆ‡æ¢
function switchChordRefTab(tabName) {
    // éšè—æ‰€æœ‰å†…å®¹
    document.querySelectorAll('.chord-ref-content').forEach(content => {
        content.classList.remove('active');
    });
    
    // ç§»é™¤æ‰€æœ‰ tab æŒ‰é’®çš„ active çŠ¶æ€
    document.querySelectorAll('.chord-ref-tab').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // æ˜¾ç¤ºé€‰ä¸­çš„å†…å®¹
    const targetContent = document.getElementById('chord' + tabName.charAt(0).toUpperCase() + tabName.slice(1) + 'Content');
    if (targetContent) {
        targetContent.classList.add('active');
    }
    
    // æ¿€æ´»å¯¹åº”çš„æŒ‰é’®
    const targetBtn = Array.from(document.querySelectorAll('.chord-ref-tab')).find(btn => 
        btn.textContent.includes(tabName === 'types' ? 'åŸºç¡€' : tabName === 'degrees' ? 'çº§æ•°' : 'ç¤ºä¾‹')
    );
    if (targetBtn) {
        targetBtn.classList.add('active');
    }
}

// äº”åº¦åœˆæ•°æ®
const CIRCLE_OF_FIFTHS = [
    { major: 'C', minor: 'Am', sharps: 0, flats: 0, sharpNotes: [], flatNotes: [] },
    { major: 'G', minor: 'Em', sharps: 1, flats: 0, sharpNotes: ['F#'], flatNotes: [] },
    { major: 'D', minor: 'Bm', sharps: 2, flats: 0, sharpNotes: ['F#', 'C#'], flatNotes: [] },
    { major: 'A', minor: 'F#m', sharps: 3, flats: 0, sharpNotes: ['F#', 'C#', 'G#'], flatNotes: [] },
    { major: 'E', minor: 'C#m', sharps: 4, flats: 0, sharpNotes: ['F#', 'C#', 'G#', 'D#'], flatNotes: [] },
    { major: 'B', minor: 'G#m', sharps: 5, flats: 0, sharpNotes: ['F#', 'C#', 'G#', 'D#', 'A#'], flatNotes: [] },
    { major: 'F#', minor: 'D#m', sharps: 6, flats: 0, sharpNotes: ['F#', 'C#', 'G#', 'D#', 'A#', 'E#'], flatNotes: [] },
    { major: 'C#', minor: 'A#m', sharps: 7, flats: 0, sharpNotes: ['F#', 'C#', 'G#', 'D#', 'A#', 'E#', 'B#'], flatNotes: [] },
    { major: 'F', minor: 'Dm', sharps: 0, flats: 1, sharpNotes: [], flatNotes: ['Bb'] },
    { major: 'Bb', minor: 'Gm', sharps: 0, flats: 2, sharpNotes: [], flatNotes: ['Bb', 'Eb'] },
    { major: 'Eb', minor: 'Cm', sharps: 0, flats: 3, sharpNotes: [], flatNotes: ['Bb', 'Eb', 'Ab'] },
    { major: 'Ab', minor: 'Fm', sharps: 0, flats: 4, sharpNotes: [], flatNotes: ['Bb', 'Eb', 'Ab', 'Db'] }
];

// éŸ³ç¬¦åˆ°é¢‘ç‡çš„æ˜ å°„ï¼ˆA4 = 440Hzï¼‰
const NOTE_FREQUENCIES = {
    'C': 261.63, 'C#': 277.18, 'Db': 277.18, 'D': 293.66, 'D#': 311.13, 'Eb': 311.13,
    'E': 329.63, 'F': 349.23, 'F#': 369.99, 'Gb': 369.99, 'G': 392.00, 'G#': 415.30,
    'Ab': 415.30, 'A': 440.00, 'A#': 466.16, 'Bb': 466.16, 'B': 493.88
};

// éŸ³ç¨‹ï¼ˆåŠéŸ³æ•°ï¼‰
const INTERVALS = {
    'minor2nd': 1, 'major2nd': 2, 'minor3rd': 3, 'major3rd': 4,
    'perfect4th': 5, 'tritone': 6, 'perfect5th': 7, 'minor6th': 8,
    'major6th': 9, 'minor7th': 10, 'major7th': 11, 'octave': 12
};

// å’Œå¼¦ç±»å‹å®šä¹‰
const CHORD_TYPES = {
    'major': { name: 'å¤§ä¸‰å’Œå¼¦', intervals: [0, 4, 7], description: 'ç”±æ ¹éŸ³ã€å¤§ä¸‰åº¦ã€çº¯äº”åº¦ç»„æˆï¼Œæ˜äº®ã€ç¨³å®š' },
    'minor': { name: 'å°ä¸‰å’Œå¼¦', intervals: [0, 3, 7], description: 'ç”±æ ¹éŸ³ã€å°ä¸‰åº¦ã€çº¯äº”åº¦ç»„æˆï¼ŒæŸ”å’Œã€å¿§éƒ' },
    'augmented': { name: 'å¢ä¸‰å’Œå¼¦', intervals: [0, 4, 8], description: 'ç”±æ ¹éŸ³ã€å¤§ä¸‰åº¦ã€å¢äº”åº¦ç»„æˆï¼Œç´§å¼ ã€ä¸ç¨³å®š' },
    'diminished': { name: 'å‡ä¸‰å’Œå¼¦', intervals: [0, 3, 6], description: 'ç”±æ ¹éŸ³ã€å°ä¸‰åº¦ã€å‡äº”åº¦ç»„æˆï¼Œéå¸¸ç´§å¼ ã€ä¸ç¨³å®š' },
    'dominant7': { name: 'å±ä¸ƒå’Œå¼¦', intervals: [0, 4, 7, 10], description: 'ç”±æ ¹éŸ³ã€å¤§ä¸‰åº¦ã€çº¯äº”åº¦ã€å°ä¸ƒåº¦ç»„æˆï¼Œéœ€è¦è§£å†³åˆ°ä¸»å’Œå¼¦' },
    'major7': { name: 'å¤§ä¸ƒå’Œå¼¦', intervals: [0, 4, 7, 11], description: 'ç”±æ ¹éŸ³ã€å¤§ä¸‰åº¦ã€çº¯äº”åº¦ã€å¤§ä¸ƒåº¦ç»„æˆï¼Œçˆµå£«æ„Ÿã€æŸ”å’Œ' },
    'minor7': { name: 'å°ä¸ƒå’Œå¼¦', intervals: [0, 3, 7, 10], description: 'ç”±æ ¹éŸ³ã€å°ä¸‰åº¦ã€çº¯äº”åº¦ã€å°ä¸ƒåº¦ç»„æˆï¼ŒæŸ”å’Œã€çˆµå£«æ„Ÿ' }
};

// å¸¸è§å’Œå¼¦è¿›è¡Œ
const COMMON_PROGRESSIONS = [
    { name: 'æµè¡Œè¿›è¡Œ', degrees: 'I-V-vi-IV', description: 'æœ€æµè¡Œçš„å’Œå¼¦è¿›è¡Œï¼Œå‡ºç°åœ¨æ— æ•°æµè¡Œæ­Œæ›²ä¸­ï¼Œå¦‚ã€ŠLet It Beã€‹ã€ã€ŠDon\'t Stop Believin\'ã€‹ç­‰' },
    { name: 'çˆµå£«è¿›è¡Œ', degrees: 'ii-V-I', description: 'ç»å…¸çš„çˆµå£«å’Œå¼¦è¿›è¡Œï¼Œiiçº§ã€Vçº§ã€Içº§ï¼Œæ˜¯çˆµå£«éŸ³ä¹çš„åŸºç¡€' },
    { name: 'å¡å†œè¿›è¡Œ', degrees: 'vi-IV-I-V', description: 'å¸•èµ«è´å°”å¡å†œçš„ç»å…¸å’Œå¼¦è¿›è¡Œï¼Œéå¸¸ä¼˜ç¾ï¼Œé€‚åˆæŠ’æƒ…æ­Œæ›²' },
    { name: 'äº”åå¹´ä»£è¿›è¡Œ', degrees: 'I-vi-IV-V', description: '50å¹´ä»£æµè¡ŒéŸ³ä¹å¸¸ç”¨çš„å’Œå¼¦è¿›è¡Œï¼Œå¦‚ã€ŠStand By Meã€‹ç­‰' },
    { name: 'å°è°ƒè¿›è¡Œ', degrees: 'i-iv-V', description: 'å°è°ƒä¸­å¸¸è§çš„å’Œå¼¦è¿›è¡Œï¼ŒæŸ”å’Œã€å¿§éƒ' },
    { name: 'è“è°ƒè¿›è¡Œ', degrees: 'I-I-I-I-IV-IV-I-I-V-IV-I-V', description: '12å°èŠ‚è“è°ƒè¿›è¡Œï¼Œæ˜¯è“è°ƒéŸ³ä¹çš„æ ‡å‡†å½¢å¼' }
];

// ä¸­å¤è°ƒå¼éŸ³ç¨‹ç»“æ„ï¼ˆä»æ˜äº®åˆ°é»‘æš—ï¼‰
const MODAL_SCALES = {
    'lydian': { name: 'Lydian', intervals: [0, 2, 4, 6, 7, 9, 11], description: 'å…¨å…¨å…¨åŠå…¨å…¨åŠ - æœ€æ˜äº®ï¼Œå¸¦æœ‰å¢å››åº¦çš„ç¥ç§˜æ„Ÿ' },
    'ionian': { name: 'Ionian (Major)', intervals: [0, 2, 4, 5, 7, 9, 11], description: 'å…¨å…¨åŠå…¨å…¨å…¨åŠ - å¤§è°ƒéŸ³é˜¶ï¼Œæ˜äº®ç¨³å®š' },
    'mixolydian': { name: 'Mixolydian', intervals: [0, 2, 4, 5, 7, 9, 10], description: 'å…¨å…¨åŠå…¨å…¨åŠå…¨ - å±è°ƒå¼ï¼Œå¸¦æœ‰å°ä¸ƒåº¦çš„çˆµå£«æ„Ÿ' },
    'dorian': { name: 'Dorian', intervals: [0, 2, 3, 5, 7, 9, 10], description: 'å…¨åŠå…¨å…¨å…¨åŠå…¨ - å°è°ƒè‰²å½©ä½†å¸¦æœ‰å¤§å…­åº¦ï¼ŒæŸ”å’Œè€Œæ˜äº®' },
    'aeolian': { name: 'Aeolian (Minor)', intervals: [0, 2, 3, 5, 7, 8, 10], description: 'å…¨åŠå…¨å…¨åŠå…¨å…¨ - è‡ªç„¶å°è°ƒï¼ŒæŸ”å’Œå¿§éƒ' },
    'phrygian': { name: 'Phrygian', intervals: [0, 1, 3, 5, 7, 8, 10], description: 'åŠå…¨å…¨å…¨åŠå…¨å…¨ - å¸¦æœ‰å°äºŒåº¦çš„å¼‚åŸŸæ„Ÿï¼Œç¥ç§˜è€Œç´§å¼ ' },
    'locrian': { name: 'Locrian', intervals: [0, 1, 3, 5, 6, 8, 10], description: 'åŠå…¨å…¨åŠå…¨å…¨å…¨ - æœ€é»‘æš—ï¼Œå¸¦æœ‰å‡äº”åº¦çš„ä¸ç¨³å®šæ„Ÿ' }
};

// å„è°ƒçš„å’Œå¼¦çº§æ•°æ˜ å°„
const CHORD_DEGREES = {
    'C': { 'I': 'C', 'IIm': 'Dm', 'IIIm': 'Em', 'IV': 'F', 'V': 'G', 'VIm': 'Am', 'VIIÂ°': 'Bdim' },
    'G': { 'I': 'G', 'IIm': 'Am', 'IIIm': 'Bm', 'IV': 'C', 'V': 'D', 'VIm': 'Em', 'VIIÂ°': 'F#dim' },
    'D': { 'I': 'D', 'IIm': 'Em', 'IIIm': 'F#m', 'IV': 'G', 'V': 'A', 'VIm': 'Bm', 'VIIÂ°': 'C#dim' },
    'A': { 'I': 'A', 'IIm': 'Bm', 'IIIm': 'C#m', 'IV': 'D', 'V': 'E', 'VIm': 'F#m', 'VIIÂ°': 'G#dim' },
    'E': { 'I': 'E', 'IIm': 'F#m', 'IIIm': 'G#m', 'IV': 'A', 'V': 'B', 'VIm': 'C#m', 'VIIÂ°': 'D#dim' },
    'B': { 'I': 'B', 'IIm': 'C#m', 'IIIm': 'D#m', 'IV': 'E', 'V': 'F#', 'VIm': 'G#m', 'VIIÂ°': 'A#dim' },
    'F#': { 'I': 'F#', 'IIm': 'G#m', 'IIIm': 'A#m', 'IV': 'B', 'V': 'C#', 'VIm': 'D#m', 'VIIÂ°': 'E#dim' },
    'C#': { 'I': 'C#', 'IIm': 'D#m', 'IIIm': 'E#m', 'IV': 'F#', 'V': 'G#', 'VIm': 'A#m', 'VIIÂ°': 'B#dim' },
    'F': { 'I': 'F', 'IIm': 'Gm', 'IIIm': 'Am', 'IV': 'Bb', 'V': 'C', 'VIm': 'Dm', 'VIIÂ°': 'Edim' },
    'Bb': { 'I': 'Bb', 'IIm': 'Cm', 'IIIm': 'Dm', 'IV': 'Eb', 'V': 'F', 'VIm': 'Gm', 'VIIÂ°': 'Adim' },
    'Eb': { 'I': 'Eb', 'IIm': 'Fm', 'IIIm': 'Gm', 'IV': 'Ab', 'V': 'Bb', 'VIm': 'Cm', 'VIIÂ°': 'Ddim' },
    'Ab': { 'I': 'Ab', 'IIm': 'Bbm', 'IIIm': 'Cm', 'IV': 'Db', 'V': 'Eb', 'VIm': 'Fm', 'VIIÂ°': 'Gdim' }
};

// è·å–éŸ³ç¬¦åç§°ï¼ˆå¤„ç†å‡é™å·ï¼‰
function getNoteName(note) {
    const noteMap = {
        'C': 'C', 'C#': 'C#', 'Db': 'C#', 'D': 'D', 'D#': 'D#', 'Eb': 'D#',
        'E': 'E', 'F': 'F', 'F#': 'F#', 'Gb': 'F#', 'G': 'G', 'G#': 'G#',
        'Ab': 'G#', 'A': 'A', 'A#': 'A#', 'Bb': 'A#', 'B': 'B'
    };
    return noteMap[note] || note;
}

// è®¡ç®—éŸ³ç¨‹ï¼ˆåŠéŸ³æ•°ï¼‰
function getInterval(note1, note2) {
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    
    // æ ‡å‡†åŒ–éŸ³ç¬¦åç§°
    const flatToSharp = {
        'Db': 'C#', 'Eb': 'D#', 'Gb': 'F#', 'Ab': 'G#', 'Bb': 'A#'
    };
    
    let normalizedNote1 = flatToSharp[note1] || note1;
    let normalizedNote2 = flatToSharp[note2] || note2;
    
    const note1Index = notes.indexOf(normalizedNote1);
    const note2Index = notes.indexOf(normalizedNote2);
    
    if (note1Index === -1 || note2Index === -1) return 0;
    return (note2Index - note1Index + 12) % 12;
}

// è·å–å’Œå¼¦çš„æ‰€æœ‰éŸ³ç¬¦
function getChordNotes(rootNote, chordType) {
    const chord = CHORD_TYPES[chordType];
    if (!chord) return [];
    
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    
    // æ ‡å‡†åŒ–éŸ³ç¬¦åç§°ï¼ˆå°†é™å·è½¬æ¢ä¸ºå‡å·ï¼‰
    let normalizedNote = rootNote;
    const flatToSharp = {
        'Db': 'C#', 'Eb': 'D#', 'Gb': 'F#', 'Ab': 'G#', 'Bb': 'A#'
    };
    if (flatToSharp[rootNote]) {
        normalizedNote = flatToSharp[rootNote];
    }
    
    const rootIndex = notes.indexOf(normalizedNote);
    if (rootIndex === -1) return [];
    
    return chord.intervals.map(interval => {
        const noteIndex = (rootIndex + interval) % 12;
        return notes[noteIndex];
    });
}

// è·å–è°ƒå¼çš„æ‰€æœ‰éŸ³ç¬¦
function getModalScaleNotes(rootNote, mode) {
    const scale = MODAL_SCALES[mode];
    if (!scale) return [];
    
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    
    // æ ‡å‡†åŒ–éŸ³ç¬¦åç§°ï¼ˆå°†é™å·è½¬æ¢ä¸ºå‡å·ï¼‰
    let normalizedNote = rootNote;
    const flatToSharp = {
        'Db': 'C#', 'Eb': 'D#', 'Gb': 'F#', 'Ab': 'G#', 'Bb': 'A#'
    };
    if (flatToSharp[rootNote]) {
        normalizedNote = flatToSharp[rootNote];
    }
    
    const rootIndex = notes.indexOf(normalizedNote);
    if (rootIndex === -1) return [];
    
    return scale.intervals.map(interval => {
        const noteIndex = (rootIndex + interval) % 12;
        return notes[noteIndex];
    });
}

// è·å–è°ƒå¼çš„éŸ³ç¨‹å…³ç³»å­—ç¬¦ä¸²
function getModalScaleIntervalsString(rootNote, mode) {
    const notes = getModalScaleNotes(rootNote, mode);
    if (notes.length === 0) return '';
    
    const intervals = notes.map((note, index) => {
        if (index === 0) return '0st';
        const prevNote = notes[index - 1];
        const interval = getInterval(prevNote, note);
        return `+${interval}st`;
    });
    
    return intervals.join(', ');
}

// æ’­æ”¾è°ƒå¼éŸ³é˜¶
function playModalScale(rootNote, mode) {
    console.log('æ’­æ”¾è°ƒå¼:', rootNote, mode);
    
    // åœæ­¢å½“å‰æ’­æ”¾
    stopChord();
    
    initAudioContext();
    
    const scaleNotes = getModalScaleNotes(rootNote, mode);
    console.log('è°ƒå¼éŸ³ç¬¦:', scaleNotes);
    if (scaleNotes.length === 0) {
        console.warn('æ— æ³•è·å–è°ƒå¼éŸ³ç¬¦:', rootNote, mode);
        return;
    }
    
    // ç¡®ä¿éŸ³é¢‘ä¸Šä¸‹æ–‡å·²æ¿€æ´»
    if (audioContext.state === 'suspended') {
        audioContext.resume().then(() => {
            playModalScaleInternal(scaleNotes);
        }).catch(err => {
            console.error('æ— æ³•æ¢å¤éŸ³é¢‘ä¸Šä¸‹æ–‡:', err);
            alert('æ— æ³•æ’­æ”¾éŸ³é¢‘ï¼Œè¯·ç¡®ä¿æµè§ˆå™¨å…è®¸éŸ³é¢‘æ’­æ”¾');
        });
    } else {
        playModalScaleInternal(scaleNotes);
    }
}

function playModalScaleInternal(scaleNotes) {
    if (!audioContext || audioContext.state !== 'running') {
        console.warn('éŸ³é¢‘ä¸Šä¸‹æ–‡æœªå°±ç»ª:', audioContext?.state);
        return;
    }
    
    // éŸ³é˜¶æ¨¡å¼ï¼šé¡ºåºæ’­æ”¾æ¯ä¸ªéŸ³ï¼Œæ¯ä¸ªéŸ³æ’­æ”¾0.6ç§’
    // æ‰€æœ‰éŸ³éƒ½åœ¨åŒä¸€ä¸ªå…«åº¦ï¼ˆC3ï¼‰æ’­æ”¾ï¼Œä¿æŒéŸ³é˜¶çš„è¿è´¯æ€§
    scaleNotes.forEach((note, index) => {
        const frequency = NOTE_FREQUENCIES[note];
        if (frequency) {
            // éŸ³é˜¶æ¨¡å¼ï¼šæ‰€æœ‰éŸ³éƒ½åœ¨C3å…«åº¦æ’­æ”¾ï¼ˆNOTE_FREQUENCIESæ˜¯C4ï¼Œæ‰€ä»¥ä¹˜ä»¥0.5ï¼‰
            const actualFreq = frequency * 0.5;
            
            setTimeout(() => {
                try {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = actualFreq;
                    oscillator.type = 'sine';
                    
                    // æ·¡å…¥æ·¡å‡º
                    const now = audioContext.currentTime;
                    gainNode.gain.setValueAtTime(0, now);
                    gainNode.gain.linearRampToValueAtTime(0.3, now + 0.05);
                    gainNode.gain.linearRampToValueAtTime(0.3, now + 0.4);
                    gainNode.gain.linearRampToValueAtTime(0, now + 0.6);
                    
                    oscillator.start(now);
                    oscillator.stop(now + 0.6);
                    
                    currentOscillators.push({ oscillator, gainNode });
                } catch (err) {
                    console.error('åˆ›å»ºéŸ³é¢‘èŠ‚ç‚¹å¤±è´¥:', err);
                }
            }, index * 600); // æ¯ä¸ªéŸ³é—´éš”600ms
        }
    });
}

// æ¸²æŸ“ä¸­å¤è°ƒå¼
function renderModalScales() {
    const container = document.getElementById('modalScalesList');
    if (!container) return;
    
    const rootNote = document.getElementById('modalRootNote').value;
    if (!rootNote) return;
    
    container.innerHTML = '';
    
    // æŒ‰æ˜äº®åˆ°é»‘æš—çš„é¡ºåºæ¸²æŸ“
    const modeOrder = ['lydian', 'ionian', 'mixolydian', 'dorian', 'aeolian', 'phrygian', 'locrian'];
    
    modeOrder.forEach(mode => {
        const scale = MODAL_SCALES[mode];
        const notes = getModalScaleNotes(rootNote, mode);
        const intervalsString = getModalScaleIntervalsString(rootNote, mode);
        
        const card = document.createElement('div');
        card.className = 'modal-scale-card';
        card.style.cursor = 'pointer';
        
        card.innerHTML = `
            <div class="modal-scale-name">${scale.name}</div>
            <div class="modal-scale-description">${scale.description}</div>
            <div class="modal-scale-notes">${notes.join(', ')}</div>
            <div class="modal-scale-intervals">(${intervalsString})</div>
        `;
        
        card.addEventListener('click', () => {
            playModalScale(rootNote, mode);
        });
        
        container.appendChild(card);
    });
}

// è·å–å’Œå¼¦çš„éŸ³ç¨‹å…³ç³»å­—ç¬¦ä¸²
function getChordIntervalsString(rootNote, chordType) {
    const notes = getChordNotes(rootNote, chordType);
    if (notes.length === 0) return '';
    
    const intervals = notes.map((note, index) => {
        if (index === 0) return '0st';
        const prevNote = notes[index - 1];
        const interval = getInterval(prevNote, note);
        return `+${interval}st`;
    });
    
    return intervals.join(', ');
}

// æ’­æ”¾å’Œå¼¦
let audioContext = null;
let currentOscillators = [];

function initAudioContext() {
    if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
    }
    // å¦‚æœéŸ³é¢‘ä¸Šä¸‹æ–‡è¢«æš‚åœï¼ˆéœ€è¦ç”¨æˆ·äº¤äº’ï¼‰ï¼Œå°è¯•æ¢å¤
    if (audioContext.state === 'suspended') {
        audioContext.resume().catch(err => {
            console.error('æ— æ³•æ¢å¤éŸ³é¢‘ä¸Šä¸‹æ–‡:', err);
        });
    }
}

function playChord(rootNote, isMajor = true) {
    console.log('æ’­æ”¾å’Œå¼¦:', rootNote, isMajor ? 'major' : 'minor');
    
    // åœæ­¢å½“å‰æ’­æ”¾
    stopChord();
    
    initAudioContext();
    
    // ç¡®ä¿éŸ³é¢‘ä¸Šä¸‹æ–‡å·²æ¿€æ´»
    if (audioContext.state === 'suspended') {
        console.log('éŸ³é¢‘ä¸Šä¸‹æ–‡è¢«æš‚åœï¼Œå°è¯•æ¢å¤...');
        audioContext.resume().then(() => {
            console.log('éŸ³é¢‘ä¸Šä¸‹æ–‡å·²æ¢å¤');
            playChordInternal(rootNote, isMajor);
        }).catch(err => {
            console.error('æ— æ³•æ¢å¤éŸ³é¢‘ä¸Šä¸‹æ–‡:', err);
            alert('æ— æ³•æ’­æ”¾éŸ³é¢‘ï¼Œè¯·ç¡®ä¿æµè§ˆå™¨å…è®¸éŸ³é¢‘æ’­æ”¾');
        });
    } else {
        playChordInternal(rootNote, isMajor);
    }
}

function playChordInternal(rootNote, isMajor = true) {
    const chordType = isMajor ? 'major' : 'minor';
    const notes = getChordNotes(rootNote, chordType);
    
    console.log('å’Œå¼¦éŸ³ç¬¦:', notes);
    
    if (notes.length === 0) {
        console.warn('æ— æ³•è·å–å’Œå¼¦éŸ³ç¬¦:', rootNote, chordType);
        return;
    }
    
    if (!audioContext || audioContext.state !== 'running') {
        console.warn('éŸ³é¢‘ä¸Šä¸‹æ–‡æœªå°±ç»ª:', audioContext?.state);
        return;
    }
    
    notes.forEach((note, index) => {
        const frequency = NOTE_FREQUENCIES[note];
        if (frequency) {
            // ä½¿ç”¨ä¸åŒå…«åº¦ï¼Œè®©å’Œå¼¦æ›´ä¸°å¯Œ
            const octave = index === 0 ? 1 : index === 1 ? 1.5 : 2;
            const actualFreq = frequency * octave;
            
            try {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = actualFreq;
                oscillator.type = 'sine';
                
                // æ·¡å…¥æ·¡å‡º
                const now = audioContext.currentTime;
                gainNode.gain.setValueAtTime(0, now);
                gainNode.gain.linearRampToValueAtTime(0.3, now + 0.1);
                gainNode.gain.linearRampToValueAtTime(0.3, now + 0.5);
                gainNode.gain.linearRampToValueAtTime(0, now + 1.0);
                
                oscillator.start(now);
                oscillator.stop(now + 1.0);
                
                currentOscillators.push({ oscillator, gainNode });
            } catch (err) {
                console.error('åˆ›å»ºéŸ³é¢‘èŠ‚ç‚¹å¤±è´¥:', err);
            }
        }
    });
}

function stopChord() {
    currentOscillators.forEach(({ oscillator, gainNode }) => {
        try {
            oscillator.stop();
            gainNode.disconnect();
        } catch (e) {
            // å¿½ç•¥é”™è¯¯
        }
    });
    currentOscillators = [];
}

// ç»˜åˆ¶æ‰‡å½¢è·¯å¾„
function createSectorPath(centerX, centerY, innerRadius, outerRadius, startAngle, endAngle) {
    // startAngle å’Œ endAngle å·²ç»æ˜¯ç›¸å¯¹äºé¡¶éƒ¨çš„è§’åº¦ï¼ˆå·²å‡90åº¦ï¼‰ï¼Œç›´æ¥è½¬æ¢ä¸ºå¼§åº¦
    const startAngleRad = startAngle * (Math.PI / 180);
    const endAngleRad = endAngle * (Math.PI / 180);
    
    const x1 = centerX + innerRadius * Math.cos(startAngleRad);
    const y1 = centerY + innerRadius * Math.sin(startAngleRad);
    const x2 = centerX + outerRadius * Math.cos(startAngleRad);
    const y2 = centerY + outerRadius * Math.sin(startAngleRad);
    const x3 = centerX + outerRadius * Math.cos(endAngleRad);
    const y3 = centerY + outerRadius * Math.sin(endAngleRad);
    const x4 = centerX + innerRadius * Math.cos(endAngleRad);
    const y4 = centerY + innerRadius * Math.sin(endAngleRad);
    
    // è®¡ç®—è§’åº¦å·®ï¼Œå¤„ç†è·¨0åº¦çš„æƒ…å†µ
    let angleDiff = endAngle - startAngle;
    if (angleDiff < 0) angleDiff += 360;
    const largeArc = angleDiff > 180 ? 1 : 0;
    
    return `M ${x1} ${y1} L ${x2} ${y2} A ${outerRadius} ${outerRadius} 0 ${largeArc} 1 ${x3} ${y3} L ${x4} ${y4} A ${innerRadius} ${innerRadius} 0 ${largeArc} 0 ${x1} ${y1} Z`;
}

// åˆå§‹åŒ–äº”åº¦åœˆ
function initCircleOfFifths() {
    const container = document.getElementById('circleOfFifths');
    if (!container) return;
    
    const size = 800;
    const padding = 50; // å¢åŠ è¾¹è·ç¡®ä¿æ–‡å­—ä¸è¢«è£å‰ª
    const centerX = size / 2;
    const centerY = size / 2;
    const outerRadius = 280;
    const middleRadius = 220;
    const innerRadius = 160;
    const signatureRadius = 320;
    const sectorAngle = 360 / 12; // æ¯ä¸ªæ‰‡å½¢30åº¦
    
    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.setAttribute('width', size);
    svg.setAttribute('height', size);
    svg.setAttribute('class', 'circle-of-fifths-svg');
    svg.setAttribute('viewBox', `0 0 ${size} ${size}`);
    svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
    svg.style.overflow = 'visible';
    
    // ç¡®ä¿æ‰€æœ‰12ä¸ªè°ƒéƒ½è¢«æ¸²æŸ“
    console.log('å¼€å§‹æ¸²æŸ“äº”åº¦åœˆï¼Œå…±', CIRCLE_OF_FIFTHS.length, 'ä¸ªè°ƒ');
    
    CIRCLE_OF_FIFTHS.forEach((key, index) => {
        // è®¡ç®—è§’åº¦ï¼šä»é¡¶éƒ¨ï¼ˆ-90åº¦ï¼‰å¼€å§‹ï¼Œæ¯ä¸ªæ‰‡å½¢30åº¦
        const startAngle = index * sectorAngle - 90; // ä»é¡¶éƒ¨å¼€å§‹
        const endAngle = (index + 1) * sectorAngle - 90;
        const centerAngle = (startAngle + endAngle) / 2;
        const centerAngleRad = centerAngle * (Math.PI / 180);
        
        console.log(`æ¸²æŸ“ç¬¬${index + 1}ä¸ªè°ƒ: ${key.major}/${key.minor}, è§’åº¦: ${startAngle.toFixed(1)}Â° - ${endAngle.toFixed(1)}Â°, ä¸­å¿ƒ: ${centerAngle.toFixed(1)}Â°`);
        
        // è°ƒå·ä½ç½®ï¼ˆæœ€å¤–åœˆï¼‰- ç›´æ¥æ·»åŠ åˆ°SVG
        const sigX = centerX + signatureRadius * Math.cos(centerAngleRad);
        const sigY = centerY + signatureRadius * Math.sin(centerAngleRad);
        const sigText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        sigText.setAttribute('x', String(sigX));
        sigText.setAttribute('y', String(sigY));
        sigText.setAttribute('text-anchor', 'middle');
        sigText.setAttribute('dominant-baseline', 'central');
        sigText.setAttribute('class', 'circle-key-signature');
        sigText.setAttribute('style', 'font-size: 12px; fill: #666;');
        let sigLabel = '';
        if (key.sharps > 0) {
            sigLabel = key.sharps + 'â™¯';
        } else if (key.flats > 0) {
            sigLabel = key.flats + 'â™­';
        } else {
            sigLabel = '0';
        }
        sigText.textContent = sigLabel;
        svg.appendChild(sigText);
        
        // å¤–åœˆï¼šå¤§è°ƒæ‰‡å½¢
        const majorGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
        majorGroup.setAttribute('class', 'circle-key-group');
        majorGroup.setAttribute('data-key', key.major);
        majorGroup.setAttribute('data-type', 'major');
        majorGroup.style.cursor = 'pointer';
        
        const majorSector = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        majorSector.setAttribute('d', createSectorPath(centerX, centerY, middleRadius, outerRadius, startAngle, endAngle));
        majorSector.setAttribute('class', 'circle-key circle-key-major');
        majorSector.setAttribute('data-key', key.major);
        majorSector.setAttribute('data-type', 'major');
        majorGroup.appendChild(majorSector);
        
        // å¤§è°ƒæ–‡å­— - å…ˆåˆ›å»ºæ–‡å­—å…ƒç´ ï¼Œä»¥ä¾¿åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸­ä½¿ç”¨
        const majorTextRadius = (middleRadius + outerRadius) / 2;
        const majorTextX = centerX + majorTextRadius * Math.cos(centerAngleRad);
        const majorTextY = centerY + majorTextRadius * Math.sin(centerAngleRad);
        const majorText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        majorText.setAttribute('x', String(majorTextX));
        majorText.setAttribute('y', String(majorTextY));
        majorText.setAttribute('text-anchor', 'middle');
        majorText.setAttribute('dominant-baseline', 'central');
        majorText.setAttribute('class', 'circle-key-text circle-key-text-major');
        majorText.setAttribute('data-key', key.major);
        majorText.setAttribute('data-type', 'major');
        majorText.setAttribute('style', 'font-size: 24px; font-weight: 400; font-family: Arial, sans-serif; fill: #1a1a1a; stroke: none; opacity: 1; pointer-events: none;');
        majorText.textContent = key.major;
        
        // å°è°ƒæ–‡å­— - å…ˆåˆ›å»ºæ–‡å­—å…ƒç´ ï¼Œä»¥ä¾¿åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸­ä½¿ç”¨
        const minorTextRadius = (innerRadius + middleRadius) / 2;
        const minorTextX = centerX + minorTextRadius * Math.cos(centerAngleRad);
        const minorTextY = centerY + minorTextRadius * Math.sin(centerAngleRad);
        const minorText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        minorText.setAttribute('x', String(minorTextX));
        minorText.setAttribute('y', String(minorTextY));
        minorText.setAttribute('text-anchor', 'middle');
        minorText.setAttribute('dominant-baseline', 'central');
        minorText.setAttribute('class', 'circle-key-text circle-key-text-minor');
        minorText.setAttribute('data-key', key.minor);
        minorText.setAttribute('data-type', 'minor');
        minorText.setAttribute('style', 'font-size: 20px; font-weight: 400; font-family: Arial, sans-serif; fill: #1a1a1a; stroke: none; opacity: 1; pointer-events: none;');
        minorText.textContent = key.minor;
        
        // å¤§è°ƒhoveräº‹ä»¶
        majorGroup.addEventListener('mouseenter', () => {
            majorText.setAttribute('fill', 'white');
        });
        majorGroup.addEventListener('mouseleave', () => {
            majorText.setAttribute('fill', '#1a1a1a');
        });
        
        majorGroup.addEventListener('click', (e) => {
            e.stopPropagation();
            // å¤–åœˆï¼šæ’­æ”¾å¤§è°ƒ
            playChord(key.major, true);
        });
        
        svg.appendChild(majorGroup);
        
        // å†…åœˆï¼šå°è°ƒæ‰‡å½¢
        const minorGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
        minorGroup.setAttribute('class', 'circle-key-group');
        minorGroup.setAttribute('data-key', key.minor);
        minorGroup.setAttribute('data-type', 'minor');
        minorGroup.style.cursor = 'pointer';
        
        const minorSector = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        minorSector.setAttribute('d', createSectorPath(centerX, centerY, innerRadius, middleRadius, startAngle, endAngle));
        minorSector.setAttribute('class', 'circle-key circle-key-minor');
        minorSector.setAttribute('data-key', key.minor);
        minorSector.setAttribute('data-type', 'minor');
        minorGroup.appendChild(minorSector);
        
        // å°è°ƒhoveräº‹ä»¶
        minorGroup.addEventListener('mouseenter', () => {
            minorText.setAttribute('fill', 'white');
        });
        minorGroup.addEventListener('mouseleave', () => {
            minorText.setAttribute('fill', '#1a1a1a');
        });
        
        minorGroup.addEventListener('click', (e) => {
            e.stopPropagation();
            // å†…åœˆï¼šæ’­æ”¾å°è°ƒ
            // ä» "Am", "F#m", "D#m" ç­‰æ ¼å¼ä¸­æå–æ ¹éŸ³
            let rootNote = key.minor.replace(/m$/, ''); // ç§»é™¤æœ«å°¾çš„ 'm'
            playChord(rootNote, false);
        });
        
        svg.appendChild(minorGroup);
        
        // æ–‡å­—æ·»åŠ åˆ°SVGæ ¹å…ƒç´ ï¼Œç¡®ä¿æ˜¾ç¤ºåœ¨æœ€ä¸Šå±‚
        svg.appendChild(majorText);
        svg.appendChild(minorText);
    });
    
    container.innerHTML = '';
    container.appendChild(svg);
    
}

// æ›´æ–°å’Œå¼¦è¿›è¡Œ
function updateChordProgressions() {
    const key = document.getElementById('progressionKey').value;
    const container = document.getElementById('chordProgressions');
    if (!container) return;
    
    container.innerHTML = '';
    
    // çº§æ•°åˆ°å’Œå¼¦çº§æ•°æ ‡è®°çš„æ˜ å°„
    const degreeToChordDegree = {
        'I': 'I', 'i': 'I',
        'II': 'IIm', 'ii': 'IIm',
        'III': 'IIIm', 'iii': 'IIIm',
        'IV': 'IV', 'iv': 'IV',
        'V': 'V', 'v': 'V',
        'VI': 'VIm', 'vi': 'VIm',
        'VII': 'VIIÂ°', 'vii': 'VIIÂ°'
    };
    
    COMMON_PROGRESSIONS.forEach(progression => {
        const card = document.createElement('div');
        card.className = 'progression-card';
        
        const degrees = progression.degrees.split('-');
        const actualChords = degrees.map(degree => {
            // ç§»é™¤å¯èƒ½çš„ä¿®é¥°ç¬¦ï¼ˆå¦‚Â°ï¼‰
            const cleanDegree = degree.replace('Â°', '').trim();
            const chordDegree = degreeToChordDegree[cleanDegree];
            if (chordDegree && CHORD_DEGREES[key]) {
                const chord = CHORD_DEGREES[key][chordDegree];
                return chord || degree;
            }
            return degree;
        });
        
        // å¯¹äºè“è°ƒè¿›è¡Œç­‰é•¿è¿›è¡Œï¼Œé™åˆ¶æ˜¾ç¤ºæ•°é‡
        const displayChords = actualChords.length > 8 
            ? [...actualChords.slice(0, 8), '...'] 
            : actualChords;
        
        card.innerHTML = `
            <div class="progression-name">${progression.name}</div>
            <div class="progression-degrees">${progression.degrees}</div>
            <div class="progression-chords">
                ${displayChords.map(chord => `<span class="chord-badge">${chord}</span>`).join('')}
            </div>
            <div class="progression-description">${progression.description}</div>
        `;
        container.appendChild(card);
    });
}

// æ¸²æŸ“å’Œå¼¦ç±»å‹
function renderChordTypes() {
    const container = document.getElementById('chordTypesList');
    if (!container) return;
    
    container.innerHTML = '';
    
    Object.keys(CHORD_TYPES).forEach(chordType => {
        const chord = CHORD_TYPES[chordType];
        const card = document.createElement('div');
        card.className = 'chord-type-card';
        
        // ä½¿ç”¨ C ä½œä¸ºç¤ºä¾‹æ ¹éŸ³
        const rootNote = 'C';
        const notes = getChordNotes(rootNote, chordType);
        const intervals = getChordIntervalsString(rootNote, chordType);
        
        card.innerHTML = `
            <div class="chord-type-name">${chord.name}</div>
            <div class="chord-construction">
                <div class="chord-construction-label">å’Œå¼¦æ„æˆï¼ˆä»¥ C ä¸ºä¾‹ï¼‰ï¼š</div>
                <div class="chord-notes">${notes.join(', ')}</div>
                <div class="chord-intervals">(${intervals})</div>
            </div>
            <div class="chord-type-description">${chord.description}</div>
        `;
        container.appendChild(card);
    });
}

// æ›´æ–°å’Œå¼¦çº§æ•°è¡¨
function updateChordDegrees() {
    const key = document.getElementById('degreeKey').value;
    const container = document.getElementById('chordDegreesTable');
    if (!container) return;
    
    const degrees = CHORD_DEGREES[key];
    if (!degrees) return;
    
    container.innerHTML = '';
    
    const degreeOrder = ['I', 'IIm', 'IIIm', 'IV', 'V', 'VIm', 'VIIÂ°'];
    degreeOrder.forEach(degree => {
        const chord = degrees[degree];
        const item = document.createElement('div');
        item.className = 'degree-item';
        
        const type = degree.includes('m') ? 'å°ä¸‰å’Œå¼¦' : degree.includes('Â°') ? 'å‡ä¸‰å’Œå¼¦' : 'å¤§ä¸‰å’Œå¼¦';
        
        item.innerHTML = `
            <div class="degree-number">${degree}</div>
            <div class="degree-chord">${chord}</div>
            <div class="degree-type">${type}</div>
        `;
        container.appendChild(item);
    });
}

// æ¸²æŸ“å’Œå¼¦è¿›è¡Œç¤ºä¾‹
function renderChordExamples() {
    const container = document.getElementById('chordExamplesList');
    if (!container) return;
    
    container.innerHTML = '';
    
    const examples = [
        {
            name: 'I-V-vi-IV (æµè¡Œè¿›è¡Œ)',
            progression: 'C - G - Am - F',
            description: 'è¿™æ˜¯æœ€æµè¡Œçš„å’Œå¼¦è¿›è¡Œï¼Œå‡ºç°åœ¨æ— æ•°æµè¡Œæ­Œæ›²ä¸­ï¼Œå¦‚ã€ŠLet It Beã€‹ã€ã€ŠDon\'t Stop Believin\'ã€‹ç­‰ã€‚'
        },
        {
            name: 'vi-IV-I-V (å¡å†œè¿›è¡Œ)',
            progression: 'Am - F - C - G',
            description: 'å¸•èµ«è´å°”å¡å†œçš„ç»å…¸å’Œå¼¦è¿›è¡Œï¼Œéå¸¸ä¼˜ç¾ï¼Œé€‚åˆæŠ’æƒ…æ­Œæ›²ã€‚'
        },
        {
            name: 'ii-V-I (çˆµå£«è¿›è¡Œ)',
            progression: 'Dm - G - C',
            description: 'ç»å…¸çš„çˆµå£«å’Œå¼¦è¿›è¡Œï¼Œiiçº§ã€Vçº§ã€Içº§ï¼Œæ˜¯çˆµå£«éŸ³ä¹çš„åŸºç¡€ã€‚'
        },
        {
            name: 'I-vi-IV-V (äº”åå¹´ä»£è¿›è¡Œ)',
            progression: 'C - Am - F - G',
            description: '50å¹´ä»£æµè¡ŒéŸ³ä¹å¸¸ç”¨çš„å’Œå¼¦è¿›è¡Œï¼Œå¦‚ã€ŠStand By Meã€‹ç­‰ã€‚'
        }
    ];
    
    examples.forEach(example => {
        const card = document.createElement('div');
        card.className = 'chord-example-card';
        card.innerHTML = `
            <div class="example-name">${example.name}</div>
            <div class="example-progression">${example.progression}</div>
            <div class="example-description">${example.description}</div>
        `;
        container.appendChild(card);
    });
}

// æ‰“å¼€è®¾ç½®å¼€å§‹æ—¥æœŸæ¨¡æ€æ¡†
function openStartDateModal() {
    const modal = document.getElementById('startDateModal');
    const startDate = getStartDate();
    const dateInput = document.getElementById('startDateInput');
    
    // å°†æ—¥æœŸæ ¼å¼åŒ–ä¸º YYYY-MM-DD
    const year = startDate.getFullYear();
    const month = String(startDate.getMonth() + 1).padStart(2, '0');
    const day = String(startDate.getDate()).padStart(2, '0');
    dateInput.value = `${year}-${month}-${day}`;
    
    modal.style.display = 'flex';
}

// å…³é—­è®¾ç½®å¼€å§‹æ—¥æœŸæ¨¡æ€æ¡†
function closeStartDateModal() {
    document.getElementById('startDateModal').style.display = 'none';
}

// ä¿å­˜å¼€å§‹æ—¥æœŸ
function saveStartDate(event) {
    event.preventDefault();
    const dateInput = document.getElementById('startDateInput');
    const dateValue = dateInput.value;
    
    if (!dateValue) {
        alert('è¯·é€‰æ‹©å¼€å§‹æ—¥æœŸ');
        return;
    }
    
    const selectedDate = new Date(dateValue);
    selectedDate.setHours(0, 0, 0, 0);
    setStartDate(selectedDate);
    
    // åˆ·æ–°æ‰€æœ‰æ˜¾ç¤º
    renderSongs();
    renderTimeline();
    renderProjectView();
    renderGantt();
    updateStats();
    
    closeStartDateModal();
    alert('å¼€å§‹æ—¥æœŸå·²æ›´æ–°ï¼');
}

// å¯¼å‡ºå‡½æ•°ä¾›å…¨å±€ä½¿ç”¨
window.editSong = editSong;
window.deleteSong = deleteSong;
window.startTimer = startTimer;
window.stopTimer = stopTimer;
window.pauseTimer = pauseTimer;
window.resumeTimer = resumeTimer;
window.switchGanttView = switchGanttView;
window.switchTimelineView = switchTimelineView;
window.showNextKnowledge = showNextKnowledge;
window.closeEncouragement = closeEncouragement;
window.switchTab = switchTab;
window.switchChordRefTab = switchChordRefTab;
window.updateChordProgressions = updateChordProgressions;
window.updateChordDegrees = updateChordDegrees;
window.renderModalScales = renderModalScales;
window.exportData = exportData;
window.importData = importData;
window.openStartDateModal = openStartDateModal;
window.closeStartDateModal = closeStartDateModal;
window.saveStartDate = saveStartDate;

